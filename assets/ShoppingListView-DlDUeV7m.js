import{d as P,u as S,x as T,c as o,b as e,t as a,f as n,e as d,q as W,s as V,y as N,n as l,h as B,F as y,g as v,z as F,m as z,i as U,o as r}from"./index-DY03h_Ei.js";import{h as A,g as q}from"./useIngredientImage-BuW95jah.js";const E={class:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24"},M={class:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg sticky top-0 z-20"},R={class:"px-4 py-4"},G={class:"flex items-center justify-between"},H={class:"text-right"},J={class:"text-2xl font-bold"},K={class:"px-4 py-4 space-y-4"},O={key:0,class:"bg-white rounded-2xl shadow-md p-8 text-center"},Q={key:1,class:"bg-white rounded-2xl shadow-md overflow-hidden"},X={class:"px-4 py-3 bg-gradient-to-r from-red-500 to-orange-500 text-white"},Y={class:"flex items-center justify-between"},Z={class:"text-sm bg-white/20 px-2 py-0.5 rounded-full"},ee={class:"px-4 py-3 bg-orange-50 flex gap-2"},te={class:"divide-y divide-gray-100"},se=["onClick"],ne={key:0,class:"text-sm"},oe=["onClick"],re=["src","alt"],le={class:"flex-1 min-w-0"},ie={class:"text-xs text-gray-400"},ae=["onClick"],de={key:2,class:"bg-white rounded-2xl shadow-md overflow-hidden"},ce={class:"px-4 py-3 bg-gradient-to-r from-blue-400 to-blue-500 text-white"},ge={class:"flex items-center justify-between"},ue={class:"text-sm bg-white/20 px-2 py-0.5 rounded-full"},he={class:"divide-y divide-gray-100"},pe=["onClick"],xe={key:0,class:"text-sm"},fe=["onClick"],be=["src","alt"],_e={class:"flex-1 min-w-0"},ye={class:"text-xs text-gray-400"},ve=["onClick"],ke={key:3,class:"bg-white rounded-2xl shadow-md overflow-hidden"},me={class:"px-4 py-3 bg-gray-400 text-white"},we={class:"flex items-center justify-between"},Ce={class:"text-sm bg-white/20 px-2 py-0.5 rounded-full"},Ie={class:"divide-y divide-gray-100"},$e=["onClick"],je={key:0,class:"text-sm"},De=["onClick"],Le=["src","alt"],Pe={class:"flex-1 min-w-0"},Se={class:"text-xs text-gray-400"},Te={key:4,class:"bg-amber-50 rounded-xl p-4 border border-amber-100"},Be=P({__name:"ShoppingListView",setup(We){const C=U(),I=S(),{shoppingList:k,thisWeekList:g,nextWeekList:u,laterList:h,thisWeekPendingCount:$,togglePurchased:p,markPurchasedAndAddToPantry:m,markThisWeekPurchased:w,addThisWeekPurchasedToPantry:j}=T();function x(i){if(A(i))return q(i);const s=I.getIngredientById(i);return(s==null?void 0:s.imageUrl)||"https://placehold.co/80x80/e2e8f0/64748b?text=Food"}function f(i){C.push(`/ingredient/${i}`)}const b=B(()=>g.value.filter(i=>i.purchased).length);function D(){if(b.value===0){alert("請先勾選已購買的食材");return}confirm(`確定將 ${b.value} 項本周食材加入冰箱？`)&&j()}function _(i){const s=new Date(i);return`${s.getMonth()+1}/${s.getDate()}`}return(i,s)=>{const L=N("router-link");return r(),o("div",E,[e("header",M,[e("div",R,[e("div",G,[s[2]||(s[2]=e("h1",{class:"text-xl font-bold flex items-center gap-2"},[e("span",null,"🛒"),e("span",null,"購物清單")],-1)),e("div",H,[e("p",J,a(n($)),1),s[1]||(s[1]=e("p",{class:"text-xs opacity-80"},"本周待購",-1))])])])]),e("div",K,[n(k).length===0?(r(),o("div",O,[s[4]||(s[4]=e("div",{class:"text-5xl mb-4"},"🎉",-1)),s[5]||(s[5]=e("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"冰箱食材充足！",-1)),s[6]||(s[6]=e("p",{class:"text-gray-500 text-sm mb-4"}," 本週計畫所需的食材都在冰箱裡了 ",-1)),W(L,{to:"/plan",class:"inline-block px-6 py-2 bg-orange-500 text-white rounded-xl text-sm hover:bg-orange-600 transition-colors"},{default:V(()=>[...s[3]||(s[3]=[z(" 查看週計畫 ",-1)])]),_:1})])):d("",!0),n(g).length>0?(r(),o("div",Q,[e("div",X,[e("div",Y,[s[7]||(s[7]=e("h2",{class:"font-bold flex items-center gap-2"},[e("span",null,"🔥"),e("span",null,"本周要買"),e("span",{class:"text-xs opacity-80 font-normal"},"（這幾天需要用）")],-1)),e("span",Z,a(n(g).length)+" 項 ",1)])]),e("div",ee,[e("button",{onClick:s[0]||(s[0]=(...t)=>n(w)&&n(w)(...t)),class:"flex-1 py-2 text-sm bg-white text-gray-700 rounded-xl hover:bg-gray-100 transition-colors border"}," 全選本周 "),e("button",{onClick:D,class:l(["flex-1 py-2 text-sm bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors",{"opacity-50 cursor-not-allowed":b.value===0}])}," ✓ 加入冰箱 ",2)]),e("div",te,[(r(!0),o(y,null,v(n(g),t=>(r(),o("div",{key:t.ingredientId,class:l(["flex items-center gap-3 p-4 transition-all",{"bg-green-50 opacity-60":t.purchased}])},[e("button",{onClick:c=>n(p)(t.ingredientId),class:l(["w-7 h-7 rounded-lg border-2 flex items-center justify-center flex-shrink-0 transition-all",t.purchased?"bg-green-500 border-green-500 text-white":"border-orange-400 hover:border-green-400"])},[t.purchased?(r(),o("span",ne,"✓")):d("",!0)],10,se),e("div",{onClick:c=>f(t.ingredientId),class:"w-11 h-11 rounded-xl overflow-hidden bg-white flex-shrink-0 cursor-pointer"},[e("img",{src:x(t.ingredientId),alt:t.name,class:l(["w-full h-full object-contain",{grayscale:t.purchased}])},null,10,re)],8,oe),e("div",le,[e("p",{class:l(["font-medium truncate",t.purchased?"text-gray-400 line-through":"text-gray-800"])},a(t.name),3),e("p",ie,a(_(t.earliestDate))+" 需要用 ",1)]),t.purchased?d("",!0):(r(),o("button",{key:0,onClick:c=>n(m)(t.ingredientId),class:"px-3 py-1 text-xs bg-cyan-100 text-cyan-700 rounded-full hover:bg-cyan-200 transition-colors flex-shrink-0"}," 🧊 買了 ",8,ae))],2))),128))])])):d("",!0),n(u).length>0?(r(),o("div",de,[e("div",ce,[e("div",ge,[s[8]||(s[8]=e("h2",{class:"font-bold flex items-center gap-2"},[e("span",null,"📅"),e("span",null,"下周再買"),e("span",{class:"text-xs opacity-80 font-normal"},"（不急，下周才用）")],-1)),e("span",ue,a(n(u).length)+" 項 ",1)])]),e("div",he,[(r(!0),o(y,null,v(n(u),t=>(r(),o("div",{key:t.ingredientId,class:l(["flex items-center gap-3 p-4 transition-all",{"bg-green-50 opacity-60":t.purchased}])},[e("button",{onClick:c=>n(p)(t.ingredientId),class:l(["w-7 h-7 rounded-lg border-2 flex items-center justify-center flex-shrink-0 transition-all",t.purchased?"bg-green-500 border-green-500 text-white":"border-blue-400 hover:border-green-400"])},[t.purchased?(r(),o("span",xe,"✓")):d("",!0)],10,pe),e("div",{onClick:c=>f(t.ingredientId),class:"w-11 h-11 rounded-xl overflow-hidden bg-white flex-shrink-0 cursor-pointer"},[e("img",{src:x(t.ingredientId),alt:t.name,class:l(["w-full h-full object-contain",{grayscale:t.purchased}])},null,10,be)],8,fe),e("div",_e,[e("p",{class:l(["font-medium truncate",t.purchased?"text-gray-400 line-through":"text-gray-800"])},a(t.name),3),e("p",ye,a(_(t.earliestDate))+" 需要用",1)]),t.purchased?d("",!0):(r(),o("button",{key:0,onClick:c=>n(m)(t.ingredientId),class:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors flex-shrink-0"}," 🧊 買了 ",8,ve))],2))),128))])])):d("",!0),n(h).length>0?(r(),o("div",ke,[e("div",me,[e("div",we,[s[9]||(s[9]=e("h2",{class:"font-bold flex items-center gap-2"},[e("span",null,"⏳"),e("span",null,"之後再買"),e("span",{class:"text-xs opacity-80 font-normal"},"（兩周後才需要）")],-1)),e("span",Ce,a(n(h).length)+" 項 ",1)])]),e("div",Ie,[(r(!0),o(y,null,v(n(h),t=>(r(),o("div",{key:t.ingredientId,class:l(["flex items-center gap-3 p-4 transition-all opacity-60",{"bg-green-50":t.purchased}])},[e("button",{onClick:c=>n(p)(t.ingredientId),class:l(["w-7 h-7 rounded-lg border-2 flex items-center justify-center flex-shrink-0",t.purchased?"bg-green-500 border-green-500 text-white":"border-gray-300"])},[t.purchased?(r(),o("span",je,"✓")):d("",!0)],10,$e),e("div",{onClick:c=>f(t.ingredientId),class:"w-11 h-11 rounded-xl overflow-hidden bg-white flex-shrink-0 cursor-pointer"},[e("img",{src:x(t.ingredientId),alt:t.name,class:"w-full h-full object-contain grayscale"},null,8,Le)],8,De),e("div",Pe,[e("p",{class:l(["font-medium truncate text-gray-500",{"line-through":t.purchased}])},a(t.name),3),e("p",Se,a(_(t.earliestDate))+" 才需要",1)])],2))),128))])])):d("",!0),n(k).length>0?(r(),o("div",Te,[...s[10]||(s[10]=[F('<p class="text-sm text-amber-700"> 💡 <strong>新鮮購物小提示：</strong></p><ul class="text-sm text-amber-700 mt-2 space-y-1"><li>🔥 <strong>本周要買</strong>：這幾天的食譜會用到，建議盡快購買</li><li>📅 <strong>下周再買</strong>：不急著買，下周才會用到</li><li>⏳ <strong>之後再買</strong>：兩周後才需要，現在不用買</li></ul>',2)])])):d("",!0)])])}}});export{Be as default};
