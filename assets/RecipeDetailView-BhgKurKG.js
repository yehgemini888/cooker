import{a as $,e as a,c as b,f as e,t as r,n as d,F as g,g as c,m as p,b as V,i as y,h as z,u as N,o as i}from"./vendor-vue-DqfF2gyw.js";import{a as T,u as D,b as E}from"./index-B5oCUIfI.js";import{h as L,g as A}from"./useIngredientImage-BuW95jah.js";import"./vendor-supabase-Dq-Jb853.js";const O={key:0,class:"min-h-screen bg-gray-50"},P={class:"relative"},q={class:"h-56 bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center relative"},G={class:"absolute bottom-0 left-0 right-0 p-4 text-white"},H={class:"flex items-center gap-2 mb-2"},J={class:"text-2xl font-bold"},K={class:"container mx-auto px-4 py-6 space-y-6"},M={class:"bg-white rounded-2xl p-5 shadow-md"},Q={class:"flex gap-3"},W=["onClick"],X={class:"text-2xl"},Y={class:"text-sm"},Z={class:"bg-white rounded-2xl p-5 shadow-md"},ee={class:"font-semibold text-gray-800 mb-4 flex items-center gap-2"},te={class:"grid grid-cols-2 gap-4"},se=["onClick"],ne=["src","alt"],le={class:"flex-1 min-w-0"},re={class:"font-medium text-gray-800 truncate"},oe={class:"flex flex-wrap gap-1 mt-1"},ae={key:0,class:"inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-xs bg-orange-100 text-orange-700"},ie={class:"bg-white rounded-2xl p-5 shadow-md"},ue={class:"space-y-4"},de={class:"flex-shrink-0 w-8 h-8 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center font-semibold"},ge={class:"text-gray-700 pt-1"},ce={class:"bg-amber-50 rounded-2xl p-5 border border-amber-100"},pe={class:"text-amber-700"},xe={class:"bg-green-50 rounded-2xl p-5 border border-green-100"},me={class:"flex flex-wrap gap-2"},fe={class:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 flex gap-3"},be={key:1,class:"min-h-screen bg-gray-50 flex items-center justify-center"},we=$({__name:"RecipeDetailView",setup(ve){const R=N(),_=V(),k=T(),u=D(),v=E(),j=b(()=>R.params.id),l=b(()=>k.recipes.find(n=>n.id===j.value));function x(n){const t=k.getIngredientById(n);return t||{id:n,name:n,category:"other",imageUrl:"https://placehold.co/200x200?text=Food"}}function F(n){return L(n)?A(n):x(n).imageUrl||"https://placehold.co/200x200/e2e8f0/64748b?text=Food"}const m=b(()=>l.value?u.isFavoriteRecipe(l.value.id):!1),f=b(()=>l.value?u.getRecipeRating(l.value.id):null),S=[{value:"like",emoji:"ğŸ˜‹",label:"æ„›"},{value:"normal",emoji:"ğŸ˜",label:"æ™®é€š"},{value:"dislike",emoji:"ğŸ™",label:"ä¸æ„›"}];function B(n){return n<=6?"bg-blue-500":n<=9?"bg-purple-500":"bg-orange-500"}function w(){_.back()}function I(){l.value&&u.toggleFavoriteRecipe(l.value.id)}function C(n){l.value&&(f.value===n?u.setRecipeRating(l.value.id,null):u.setRecipeRating(l.value.id,n))}function U(n){_.push(`/ingredient/${n}`)}function h(n){const t=[],s=x(n),o=u.getIngredientState(n);return v.hasItem(n)&&t.push({icon:"ğŸ§Š",label:"å†°ç®±æœ‰",color:"bg-cyan-100 text-cyan-700"}),o.status==="tried"&&t.push({icon:"âœ…",label:"å·²å˜—è©¦",color:"bg-green-100 text-green-700"}),o.allergy&&t.push({icon:"â—",label:"éæ•",color:"bg-red-100 text-red-700"}),s.allergy_risk&&t.push({icon:"âš ï¸",label:"é«˜é¢¨éšª",color:"bg-orange-100 text-orange-700"}),t}return(n,t)=>l.value?(i(),a("div",O,[e("div",P,[e("button",{onClick:w,class:"absolute top-4 left-4 z-10 w-10 h-10 bg-white/80 backdrop-blur rounded-full flex items-center justify-center shadow-md"}," â† "),e("button",{onClick:I,class:"absolute top-4 right-4 z-10 w-10 h-10 bg-white/80 backdrop-blur rounded-full flex items-center justify-center shadow-md"},r(m.value?"â¤ï¸":"ğŸ¤"),1),e("div",q,[t[2]||(t[2]=e("span",{class:"text-8xl"},"ğŸ²",-1)),t[3]||(t[3]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"},null,-1)),e("div",G,[e("div",H,[e("span",{class:d(["px-3 py-1 rounded-full text-xs font-medium text-white",B(l.value.min_month)])},r(l.value.min_month)+"-"+r(l.value.max_month)+"M ",3),(i(!0),a(g,null,c(l.value.nutrition_tags.slice(0,2),s=>(i(),a("span",{key:s,class:"px-2 py-1 rounded-full text-xs bg-white/20 backdrop-blur"},r(s),1))),128))]),e("h1",J,r(l.value.title),1)])])]),e("div",K,[e("div",M,[t[4]||(t[4]=e("h2",{class:"font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("span",{class:"text-xl"},"ğŸ‘¶"),p(" å¯¶å¯¶æ„›å—ï¼Ÿ ")],-1)),e("div",Q,[(i(),a(g,null,c(S,s=>e("button",{key:s.value,onClick:o=>C(s.value),class:d(["flex-1 py-3 px-4 rounded-xl font-medium transition-all flex flex-col items-center gap-1",f.value===s.value?s.value==="like"?"bg-green-100 ring-2 ring-green-500 text-green-700":s.value==="normal"?"bg-gray-100 ring-2 ring-gray-400 text-gray-700":"bg-red-100 ring-2 ring-red-500 text-red-700":"bg-gray-50 text-gray-500 hover:bg-gray-100"])},[e("span",X,r(s.emoji),1),e("span",Y,r(s.label),1)],10,W)),64))])]),e("div",Z,[e("h2",ee,[t[5]||(t[5]=e("span",{class:"text-xl"},"ğŸ¥•",-1)),p(" æ‰€éœ€é£Ÿæ ("+r(l.value.ingredient_ids.length)+") ",1)]),e("div",te,[(i(!0),a(g,null,c(l.value.ingredient_ids,s=>(i(),a("div",{key:s,onClick:o=>U(s),class:d(["flex items-start gap-3 p-3 bg-gray-50 rounded-xl cursor-pointer hover:bg-gray-100 transition-colors",{"ring-2 ring-red-400":y(u).getIngredientState(s).allergy}])},[e("div",{class:d(["w-14 h-14 rounded-xl overflow-hidden flex-shrink-0 bg-white ring-2",y(v).hasItem(s)?"ring-cyan-400":"ring-gray-200"])},[e("img",{src:F(s),alt:x(s).name,class:"w-full h-full object-contain",onError:t[0]||(t[0]=o=>o.target.src="https://placehold.co/200x200/e2e8f0/64748b?text=Food")},null,40,ne)],2),e("div",le,[e("p",re,r(x(s).name),1),e("div",oe,[(i(!0),a(g,null,c(h(s),o=>(i(),a("span",{key:o.label,class:d(["inline-flex items-center gap-0.5 px-1.5 py-0.5 rounded text-xs",o.color])},[e("span",null,r(o.icon),1),e("span",null,r(o.label),1)],2))),128)),h(s).length===0||!y(v).hasItem(s)&&h(s).every(o=>o.label!=="å†°ç®±æœ‰")?(i(),a("span",ae,[...t[6]||(t[6]=[e("span",null,"ğŸ›’",-1),e("span",null,"éœ€è³¼è²·",-1)])])):z("",!0)])])],10,se))),128))])]),e("div",ie,[t[7]||(t[7]=e("h2",{class:"font-semibold text-gray-800 mb-4 flex items-center gap-2"},[e("span",{class:"text-xl"},"ğŸ“"),p(" è£½ä½œæ­¥é©Ÿ ")],-1)),e("ol",ue,[(i(!0),a(g,null,c(l.value.steps,(s,o)=>(i(),a("li",{key:o,class:"flex gap-4"},[e("span",de,r(o+1),1),e("span",ge,r(s),1)]))),128))])]),e("div",ce,[t[8]||(t[8]=e("h2",{class:"font-semibold text-amber-800 mb-2 flex items-center gap-2"},[e("span",{class:"text-xl"},"ğŸ’¡"),p(" åª½åª½å°æ’‡æ­¥ ")],-1)),e("p",pe,r(l.value.tips),1)]),e("div",xe,[t[9]||(t[9]=e("h2",{class:"font-semibold text-green-800 mb-3 flex items-center gap-2"},[e("span",{class:"text-xl"},"ğŸ¥—"),p(" ç‡Ÿé¤Šåƒ¹å€¼ ")],-1)),e("div",me,[(i(!0),a(g,null,c(l.value.nutrition_tags,s=>(i(),a("span",{key:s,class:"px-3 py-1 rounded-full text-sm bg-green-100 text-green-700"},r(s),1))),128))])])]),e("div",fe,[e("button",{onClick:I,class:d(["flex-1 py-3 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",m.value?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"])},[e("span",null,r(m.value?"â¤ï¸":"ğŸ¤"),1),e("span",null,r(m.value?"å·²æ”¶è—":"æ”¶è—"),1)],2),e("button",{onClick:t[1]||(t[1]=s=>C("like")),class:d(["flex-1 py-3 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",f.value==="like"?"bg-green-500 text-white":"bg-green-100 text-green-700"])},[t[10]||(t[10]=e("span",null,"ğŸ˜‹",-1)),e("span",null,r(f.value==="like"?"å¯¶å¯¶æ„›!":"å¯¶å¯¶æ„›"),1)],2)]),t[11]||(t[11]=e("div",{class:"h-24"},null,-1))])):(i(),a("div",be,[e("div",{class:"text-center"},[t[12]||(t[12]=e("p",{class:"text-5xl mb-4"},"ğŸ¤”",-1)),t[13]||(t[13]=e("p",{class:"text-gray-500 mb-4"},"æ‰¾ä¸åˆ°æ­¤é£Ÿè­œ",-1)),e("button",{onClick:w,class:"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium"}," è¿”å› ")])]))}});export{we as default};
