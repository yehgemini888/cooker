import{d as O,u as U,a as q,c as n,b as e,e as o,h as b,t as r,F as h,g as _,n as u,r as d,l as F,w as E,v as P,f as k,m as R,i as Q,o as a,_ as Y}from"./index-DY03h_Ei.js";import{u as G}from"./useSmartRecipes-BlzbrvxC.js";import{u as H}from"./user-BQF-L8bI.js";const J={class:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 pb-24"},K={class:"bg-white shadow-sm sticky top-0 z-20"},W={class:"px-4 py-4"},X={class:"flex items-center justify-between"},Z={class:"flex items-center gap-2"},ee={key:0,class:"text-xs px-2 py-1 bg-primary-100 text-primary-700 rounded-full"},te={class:"bg-white border-b sticky top-[60px] z-10 px-4 py-3 space-y-3"},se={class:"flex gap-1 overflow-x-auto scrollbar-hide"},le=["onClick"],ne={class:"flex gap-2 flex-wrap"},ae={class:"relative"},oe={key:0,class:"absolute top-full left-0 mt-1 w-64 bg-white rounded-xl shadow-xl border z-30 max-h-64 overflow-hidden"},ie={class:"p-2 border-b"},re={class:"max-h-48 overflow-y-auto"},ue=["onClick"],de={key:0,class:"text-xs text-cyan-500"},pe={key:1,class:"px-4 py-4"},ce={class:"px-4 py-2"},ge={class:"text-sm text-gray-500"},ve={class:"font-semibold text-gray-700"},xe={class:"px-4 py-2"},fe={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},me=["onClick"],ye={class:"px-4 pt-4 flex items-center justify-between"},be={class:"flex gap-2 flex-wrap"},he={key:0,class:"text-xs px-2 py-1 rounded-full bg-green-100 text-green-800 font-medium"},_e={key:1,class:"text-xs px-2 py-1 rounded-full bg-red-100 text-red-800 font-medium"},ke=["onClick"],we={class:"p-4"},Ce={class:"text-lg font-semibold text-gray-800 mb-2"},Ie={class:"space-y-1 text-sm"},Fe={key:0,class:"flex items-start gap-2"},$e={class:"text-gray-600 line-clamp-1"},Re={key:1,class:"flex items-start gap-2"},Me={class:"text-gray-600 line-clamp-1"},Se={class:"flex flex-wrap gap-1 mt-3"},Te={key:0,class:"text-center py-16 text-gray-500"},Ae=O({__name:"RecipesView",setup(Ve){const M=Q(),{scoredRecipes:S}=G(),w=U(),m=H(),T=q(),p=d("all"),A=[{value:"all",label:"å…¨éƒ¨"},{value:"4-6",label:"4-6M"},{value:"7-9",label:"7-9M"},{value:"10-12",label:"10-12M"},{value:"12+",label:"1Y+"}],i=d(""),c=d(!1),y=d(""),V=b(()=>{const l=y.value.toLowerCase();return l?w.ingredients.filter(t=>t.name.toLowerCase().includes(l)).slice(0,20):w.ingredients.slice(0,20)}),z=b(()=>{if(!i.value)return"";const l=w.getIngredientById(i.value);return(l==null?void 0:l.name)||""}),g=d(!1),v=d(!1),x=d(!1),C=b(()=>S.value.filter(l=>{if(p.value!=="all"){const t=l.recipe.min_month,s=l.recipe.max_month;switch(p.value){case"4-6":if(t>6)return!1;break;case"7-9":if(s<7||t>9)return!1;break;case"10-12":if(s<10||t>12)return!1;break;case"12+":if(s<12)return!1;break}}return!(i.value&&!l.recipe.ingredient_ids.includes(i.value)||g.value&&!l.readyToCook||v.value&&!m.isFavoriteRecipe(l.recipe.id)||x.value&&!m.isRecipeLiked(l.recipe.id))}));function L(l){i.value=l,c.value=!1,y.value=""}function j(){i.value="",y.value=""}function $(){p.value="all",i.value="",g.value=!1,v.value=!1,x.value=!1}function B(l,t){return l<=6?"bg-blue-100 text-blue-800":l<=9?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"}function D(l,t){return`${l}-${t}M`}function N(l){M.push(`/recipe/${l.recipe.id}`)}const I=b(()=>{let l=0;return p.value!=="all"&&l++,i.value&&l++,g.value&&l++,v.value&&l++,x.value&&l++,l});return(l,t)=>(a(),n("div",J,[e("header",K,[e("div",W,[e("div",X,[t[7]||(t[7]=e("h1",{class:"text-xl font-bold text-gray-800"},"ğŸ“– æ™ºæ…§é£Ÿè­œ",-1)),e("div",Z,[I.value>0?(a(),n("span",ee,r(I.value)+" å€‹ç¯©é¸ ",1)):o("",!0),I.value>0?(a(),n("button",{key:1,onClick:$,class:"text-xs text-gray-500 hover:text-gray-700"}," é‡ç½® ")):o("",!0)])])])]),e("div",te,[e("div",se,[(a(),n(h,null,_(A,s=>e("button",{key:s.value,onClick:f=>p.value=s.value,class:u(["flex-shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition-all",p.value===s.value?"bg-primary-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},r(s.label),11,le)),64))]),e("div",ne,[e("div",ae,[e("button",{onClick:t[0]||(t[0]=s=>c.value=!c.value),class:u(["px-3 py-1.5 rounded-full text-sm font-medium transition-all flex items-center gap-1",i.value?"bg-cyan-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[t[8]||(t[8]=e("span",null,"ğŸ¥•",-1)),e("span",null,r(z.value||"é¸æ“‡é£Ÿæ"),1),i.value?(a(),n("span",{key:0,onClick:F(j,["stop"]),class:"ml-1"},"âœ•")):o("",!0)],2),c.value?(a(),n("div",oe,[e("div",ie,[E(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s),type:"text",placeholder:"æœå°‹é£Ÿæ...",class:"w-full px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",onClick:t[2]||(t[2]=F(()=>{},["stop"]))},null,512),[[P,y.value]])]),e("div",re,[(a(!0),n(h,null,_(V.value,s=>(a(),n("button",{key:s.id,onClick:f=>L(s.id),class:u(["w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",{"bg-cyan-50":i.value===s.id}])},[e("span",null,r(s.name),1),k(T).hasItem(s.id)?(a(),n("span",de,"ğŸ§Š")):o("",!0)],10,ue))),128))])])):o("",!0)]),e("button",{onClick:t[3]||(t[3]=s=>g.value=!g.value),class:u(["px-3 py-1.5 rounded-full text-sm font-medium transition-all flex items-center gap-1",g.value?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[...t[9]||(t[9]=[e("span",null,"ğŸ§Š",-1),e("span",null,"å¯ç«‹å³åš",-1)])],2),e("button",{onClick:t[4]||(t[4]=s=>v.value=!v.value),class:u(["px-3 py-1.5 rounded-full text-sm font-medium transition-all flex items-center gap-1",v.value?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[...t[10]||(t[10]=[e("span",null,"â¤ï¸",-1),e("span",null,"æ”¶è—",-1)])],2),e("button",{onClick:t[5]||(t[5]=s=>x.value=!x.value),class:u(["px-3 py-1.5 rounded-full text-sm font-medium transition-all flex items-center gap-1",x.value?"bg-yellow-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[...t[11]||(t[11]=[e("span",null,"ğŸ˜‹",-1),e("span",null,"å¯¶å¯¶æ„›",-1)])],2)])]),c.value?(a(),n("div",{key:0,onClick:t[6]||(t[6]=s=>c.value=!1),class:"fixed inset-0 z-20"})):o("",!0),k(m).getAgeInMonths===0?(a(),n("div",pe,[...t[12]||(t[12]=[e("div",{class:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-800"},[e("p",{class:"font-medium"},"ğŸ’¡ å°æç¤º"),e("p",{class:"text-sm mt-1"},"è«‹å…ˆåˆ°ã€Œå¯¶å¯¶ã€é é¢è¨­å®šå¯¶å¯¶è³‡æ–™ï¼Œä»¥ç²å¾—æ›´ç²¾æº–çš„é£Ÿè­œæ¨è–¦ï¼")],-1)])])):o("",!0),e("div",ce,[e("p",ge,[t[13]||(t[13]=R(" æ‰¾åˆ° ",-1)),e("span",ve,r(C.value.length),1),t[14]||(t[14]=R(" é“é£Ÿè­œ ",-1))])]),e("div",xe,[e("div",fe,[(a(!0),n(h,null,_(C.value,s=>(a(),n("div",{key:s.recipe.id,onClick:f=>N(s),class:u(["bg-white rounded-xl shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-all duration-200 hover:-translate-y-1",{"ring-2 ring-red-400":s.hasAllergyIngredients}])},[e("div",ye,[e("div",be,[e("span",{class:u(["text-xs px-2 py-1 rounded-full font-medium",B(s.recipe.min_month,s.recipe.max_month)])},r(D(s.recipe.min_month,s.recipe.max_month)),3),s.readyToCook?(a(),n("span",he," âœ… å¯ç«‹å³åš ")):o("",!0),s.hasAllergyIngredients?(a(),n("span",_e," âš ï¸ éæ• ")):o("",!0)]),e("button",{onClick:F(f=>k(m).toggleFavoriteRecipe(s.recipe.id),["stop"]),class:"text-xl hover:scale-110 transition-transform"},r(k(m).isFavoriteRecipe(s.recipe.id)?"â¤ï¸":"ğŸ¤"),9,ke)]),e("div",we,[e("h3",Ce,r(s.recipe.title),1),e("div",Ie,[s.availableIngredients.length>0?(a(),n("div",Fe,[t[15]||(t[15]=e("span",{class:"text-green-500"},"âœ“",-1)),e("span",$e,"æœ‰: "+r(s.availableIngredients.join("ã€")),1)])):o("",!0),s.missingIngredients.length>0?(a(),n("div",Re,[t[16]||(t[16]=e("span",{class:"text-orange-500"},"âœ—",-1)),e("span",Me,"ç¼º: "+r(s.missingIngredients.join("ã€")),1)])):o("",!0)]),e("div",Se,[(a(!0),n(h,null,_(s.recipe.nutrition_tags.slice(0,3),f=>(a(),n("span",{key:f,class:"text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-600"},r(f),1))),128))])])],10,me))),128))]),C.value.length===0?(a(),n("div",Te,[t[17]||(t[17]=e("p",{class:"text-5xl mb-4"},"ğŸ“­",-1)),t[18]||(t[18]=e("p",null,"æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„é£Ÿè­œ",-1)),e("button",{onClick:$,class:"mt-4 px-4 py-2 bg-primary-500 text-white rounded-xl text-sm hover:bg-primary-600 transition-colors"}," é‡ç½®ç¯©é¸æ¢ä»¶ ")])):o("",!0)])]))}}),Be=Y(Ae,[["__scopeId","data-v-c3b13cd9"]]);export{Be as default};
