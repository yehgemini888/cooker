import{d as H,p as I,u as J,c as l,b as e,f as P,i as K,t as o,r as w,F as x,g as y,e as v,h as D,n as f,m as S,o as n}from"./index-Cd8MWMna.js";import{u as Q}from"./useSmartRecipes-DkD7EFoH.js";import"./user-DDvbDB8-.js";const U={class:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50"},X={class:"bg-white shadow-sm"},Y={class:"container mx-auto px-4 py-4"},Z={class:"flex items-center justify-between"},ee={class:"bg-white border-b"},te={class:"container mx-auto px-4 py-4"},se={class:"flex items-center justify-between mb-2"},ae={class:"text-sm text-gray-500"},le={class:"text-sm text-gray-500"},ne={class:"flex gap-2"},oe={class:"container mx-auto px-4 py-6"},ie={key:0,class:"space-y-6"},re={class:"bg-white rounded-2xl shadow-lg p-6"},de={class:"grid grid-cols-7 gap-2 mb-4"},ue=["onClick"],ce={class:"text-xs font-medium"},ge={class:"text-lg font-bold mt-1"},pe={key:0,class:"bg-white rounded-2xl shadow-lg p-6"},ve={key:1,class:"space-y-4"},me={class:"bg-white rounded-xl shadow-md p-4"},xe={class:"text-sm text-gray-600"},ye={class:"font-bold text-primary-500"},he={class:"space-y-3"},fe=["onClick"],_e={class:"flex items-center gap-3"},be={class:"flex-1"},we={class:"flex items-center gap-2"},ke={class:"font-medium text-gray-800"},Ce={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-800"},Se={key:1,class:"text-xs px-2 py-0.5 rounded-full bg-red-100 text-red-800"},De={class:"text-sm text-gray-500 mt-1"},Re={key:2,class:"space-y-4"},Ne={class:"bg-white rounded-xl shadow-md p-4"},We={class:"flex flex-wrap gap-2"},Pe={class:"space-y-3"},Oe={class:"flex items-center justify-between mb-3"},$e={class:"font-medium text-gray-800"},je={class:"text-gray-500 text-sm ml-1"},Ae={key:0,class:"flex flex-wrap gap-2 mb-3"},Ee=["onClick"],Fe={class:"flex flex-wrap gap-1"},Me=["onClick"],Te={key:3,class:"space-y-4"},Le={class:"bg-white rounded-2xl shadow-lg p-6"},Ve={class:"space-y-4"},ze={class:"flex items-start gap-4"},Be={class:"w-16 text-center"},qe={class:"text-sm text-gray-500"},Ge={class:"text-2xl font-bold text-gray-800"},He={class:"flex-1"},Ie={key:0,class:"space-y-2"},Je={class:"font-medium text-gray-800"},Ke={key:1,class:"text-gray-400 italic"},Qe={class:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg"},Ue={class:"container mx-auto px-4 py-4 flex gap-3"},Xe=["disabled"],k=4,st=H({__name:"WizardView",setup(Ye){const R=K(),h=I(),O=J(),{recommendedRecipes:N,scoredRecipes:$}=Q(),d=w(1),p=w([]),_=w(!1),u=w([]),r=w({}),b=D(()=>{const a=[],t=new Date,s=t.getDay(),c=t.getDate()-s+(s===0?-6:1);for(let m=0;m<7;m++){const i=new Date(t);i.setDate(c+m);const g=i.toISOString().split("T")[0],G=["Êó•","‰∏Ä","‰∫å","‰∏â","Âõõ","‰∫î","ÂÖ≠"];a.push({date:g,dayName:`ÈÄ±${G[i.getDay()]}`,dayNum:i.getDate()})}return a});function j(a){const t=p.value.indexOf(a);t>=0?p.value.splice(t,1):p.value.push(a),p.value.sort()}function A(){p.value=b.value.map(a=>a.date)}function E(){h.lastWeekPlan&&(_.value=!0)}function F(a){const t=u.value.indexOf(a);t>=0?u.value.splice(t,1):u.value.length<7&&u.value.push(a)}function M(){const a={},t=[...u.value];p.value.forEach(s=>{if(a[s]=[],t.length>0){const c=Math.floor(Math.random()*t.length);a[s].push(t[c])}}),r.value=a}function T(a,t){r.value[t]||(r.value[t]=[]),r.value[t].includes(a)||r.value[t].push(a)}function L(a,t){if(!r.value[t])return;const s=r.value[t].indexOf(a);s>=0&&r.value[t].splice(s,1)}function C(a){const t=O.recipes.find(s=>s.id===a);return(t==null?void 0:t.title)||a}function V(){if(d.value===1&&_.value&&h.lastWeekPlan){const a=h.lastWeekPlan.meals,t=new Set;Object.values(a).forEach(s=>{s.forEach(c=>t.add(c))}),u.value=[...t]}if(d.value===2)if(_.value&&h.lastWeekPlan){const a=h.copyLastWeekPlan(p.value);a&&(r.value={...a.meals})}else p.value.forEach(a=>{r.value[a]||(r.value[a]=[])});d.value<k&&d.value++}function z(){d.value>1&&d.value--}function B(){const a={id:`plan-${Date.now()}`,weekStartDate:h.currentWeekStart,meals:{...r.value},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};h.savePlan(a),R.push("/")}const W=D(()=>{switch(d.value){case 1:return p.value.length>0;case 2:return u.value.length>=1;case 3:return Object.values(r.value).some(a=>a.length>0);default:return!0}}),q=D(()=>N.value.length>0?N.value:$.value);return(a,t)=>(n(),l("div",U,[e("header",X,[e("div",Y,[e("div",Z,[e("button",{onClick:t[0]||(t[0]=s=>P(R).push("/")),class:"text-gray-600 hover:text-primary-500 transition-colors"}," ‚úï ÂèñÊ∂à "),t[1]||(t[1]=e("h1",{class:"text-xl font-bold text-gray-800"},"üìÖ ÈÄ±Ë®àÁï´ÂöÆÂ∞é",-1)),t[2]||(t[2]=e("div",{class:"w-12"},null,-1))])])]),e("div",ee,[e("div",te,[e("div",se,[e("span",ae,"Ê≠•È©ü "+o(d.value)+" / "+o(k),1),e("span",le,o(["Ë®≠ÂÆöÊó•Êúü","ÈÅ∏ÊìáÈ£üË≠ú","ÂàÜÈÖçÈ§êÈªû","Á¢∫Ë™çË®àÁï´"][d.value-1]),1)]),e("div",ne,[(n(),l(x,null,y(k,s=>e("div",{key:s,class:f(["flex-1 h-2 rounded-full transition-all duration-300",s<=d.value?"bg-primary-500":"bg-gray-200"])},null,2)),64))])])]),e("div",oe,[d.value===1?(n(),l("div",ie,[e("div",re,[t[3]||(t[3]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"üìÜ ÈÅ∏ÊìáË¶ÅË¶èÂäÉÁöÑÊó•Êúü",-1)),e("div",de,[(n(!0),l(x,null,y(b.value,s=>(n(),l("button",{key:s.date,onClick:c=>j(s.date),class:f(["flex flex-col items-center p-3 rounded-xl transition-all duration-200",p.value.includes(s.date)?"bg-primary-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},[e("span",ce,o(s.dayName),1),e("span",ge,o(s.dayNum),1)],10,ue))),128))]),e("button",{onClick:A,class:"w-full py-2 text-primary-500 hover:bg-primary-50 rounded-lg transition-colors text-sm font-medium"}," ÈÅ∏ÊìáÂÖ®ÈÉ® ")]),P(h).lastWeekPlan?(n(),l("div",pe,[t[4]||(t[4]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-2"},"‚è™ Ë§áË£Ω‰∏äÈÄ±Ë®àÁï´",-1)),t[5]||(t[5]=e("p",{class:"text-sm text-gray-500 mb-4"}," Â∞á‰∏äÈÄ±ÁöÑÈ§êÈªûË¶èÂäÉË§áË£ΩÂà∞Êú¨ÈÄ±ÔºåÊÇ®ÂèØ‰ª•Âú®ÂæåÁ∫åÊ≠•È©üÈÄ≤Ë°åË™øÊï¥„ÄÇ ",-1)),e("button",{onClick:E,class:f(["w-full py-3 rounded-xl font-medium transition-all duration-200",_.value?"bg-secondary-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},o(_.value?"‚úì Â∑≤ÈÅ∏ÊìáË§áË£Ω‰∏äÈÄ±":"Ë§áË£Ω‰∏äÈÄ±Ë®àÁï´"),3)])):v("",!0)])):v("",!0),d.value===2?(n(),l("div",ve,[e("div",me,[e("p",xe,[t[6]||(t[6]=S(" Â∑≤ÈÅ∏Êìá ",-1)),e("span",ye,o(u.value.length),1),t[7]||(t[7]=S(" ÈÅìÈ£üË≠ú ",-1)),t[8]||(t[8]=e("span",{class:"text-gray-400"},"(Âª∫Ë≠∞ 3-5 ÈÅì)",-1))])]),e("div",he,[(n(!0),l(x,null,y(q.value,s=>(n(),l("div",{key:s.recipe.id,onClick:c=>F(s.recipe.id),class:f(["bg-white rounded-xl shadow-md p-4 cursor-pointer transition-all duration-200",{"ring-2 ring-primary-500 bg-primary-50":u.value.includes(s.recipe.id),"hover:shadow-lg":!u.value.includes(s.recipe.id),"opacity-50":s.hasAllergyIngredients}])},[e("div",_e,[e("div",{class:f(["w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all",u.value.includes(s.recipe.id)?"bg-primary-500 text-white":"bg-gray-100"])},o(u.value.includes(s.recipe.id)?"‚úì":""),3),e("div",be,[e("div",we,[e("h3",ke,o(s.recipe.title),1),s.readyToCook?(n(),l("span",Ce," ‚úÖ Ready ")):v("",!0),s.hasAllergyIngredients?(n(),l("span",Se," ‚ö†Ô∏è ÈÅéÊïè ")):v("",!0)]),e("p",De,o(s.recipe.min_month)+"-"+o(s.recipe.max_month)+"M ¬∑ "+o(s.missingIngredients.length>0?`Áº∫ ${s.missingIngredients.length} Á®ÆÈ£üÊùê`:"È£üÊùêÈΩäÂÖ®"),1)])])],10,fe))),128))])])):v("",!0),d.value===3?(n(),l("div",Re,[e("div",{class:"bg-white rounded-xl shadow-md p-4"},[e("div",{class:"flex items-center justify-between"},[t[9]||(t[9]=e("p",{class:"text-sm text-gray-600"},"Â∞áÈ£üË≠úÂàÜÈÖçÂà∞ÂêÑÂ§©",-1)),e("button",{onClick:M,class:"px-4 py-2 bg-primary-500 text-white rounded-lg text-sm font-medium hover:bg-primary-600 transition-colors"}," üé≤ Ëá™ÂãïÂàÜÈÖç ")])]),e("div",Ne,[t[10]||(t[10]=e("h3",{class:"text-sm font-medium text-gray-500 mb-3"},"Â∑≤ÈÅ∏È£üË≠ú (ÈªûÊìäÂàÜÈÖçÂà∞Êó•Êúü)",-1)),e("div",We,[(n(!0),l(x,null,y(u.value,s=>(n(),l("span",{key:s,class:"px-3 py-1.5 bg-primary-100 text-primary-700 rounded-full text-sm cursor-pointer hover:bg-primary-200 transition-colors"},o(C(s)),1))),128))])]),e("div",Pe,[(n(!0),l(x,null,y(p.value,s=>{var c,m;return n(),l("div",{key:s,class:"bg-white rounded-xl shadow-md p-4"},[e("div",Oe,[e("h3",$e,[S(o((c=b.value.find(i=>i.date===s))==null?void 0:c.dayName)+" ",1),e("span",je,o(s),1)])]),(m=r.value[s])!=null&&m.length?(n(),l("div",Ae,[(n(!0),l(x,null,y(r.value[s],i=>(n(),l("span",{key:i,class:"inline-flex items-center gap-1 px-3 py-1.5 bg-secondary-100 text-secondary-700 rounded-full text-sm"},[S(o(C(i))+" ",1),e("button",{onClick:g=>L(i,s),class:"ml-1 hover:text-red-500"}," ‚úï ",8,Ee)]))),128))])):v("",!0),e("div",Fe,[(n(!0),l(x,null,y(u.value.filter(i=>{var g;return!((g=r.value[s])!=null&&g.includes(i))}),i=>(n(),l("button",{key:i,onClick:g=>T(i,s),class:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-lg hover:bg-primary-100 hover:text-primary-600 transition-colors"}," + "+o(C(i)),9,Me))),128))])])}),128))])])):v("",!0),d.value===4?(n(),l("div",Te,[e("div",Le,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"‚ú® ÈÄ±Ë®àÁï´È†êË¶Ω",-1)),e("div",Ve,[(n(!0),l(x,null,y(p.value,s=>{var c,m,i;return n(),l("div",{key:s,class:"border-b border-gray-100 pb-4 last:border-0 last:pb-0"},[e("div",ze,[e("div",Be,[e("p",qe,o((c=b.value.find(g=>g.date===s))==null?void 0:c.dayName),1),e("p",Ge,o((m=b.value.find(g=>g.date===s))==null?void 0:m.dayNum),1)]),e("div",He,[(i=r.value[s])!=null&&i.length?(n(),l("div",Ie,[(n(!0),l(x,null,y(r.value[s],g=>(n(),l("div",{key:g,class:"p-3 bg-gradient-to-r from-primary-50 to-secondary-50 rounded-xl"},[e("p",Je,o(C(g)),1)]))),128))])):(n(),l("p",Ke,"Â∞öÊú™ÂÆâÊéíÈ§êÈªû"))])])])}),128))])])])):v("",!0)]),e("div",Qe,[e("div",Ue,[d.value>1?(n(),l("button",{key:0,onClick:z,class:"flex-1 py-3 rounded-xl bg-gray-100 text-gray-700 font-medium hover:bg-gray-200 transition-colors"}," ‚Üê ‰∏ä‰∏ÄÊ≠• ")):v("",!0),d.value<k?(n(),l("button",{key:1,onClick:V,disabled:!W.value,class:f(["flex-1 py-3 rounded-xl font-medium transition-all duration-200",W.value?"bg-primary-500 text-white hover:bg-primary-600":"bg-gray-200 text-gray-400 cursor-not-allowed"])}," ‰∏ã‰∏ÄÊ≠• ‚Üí ",10,Xe)):v("",!0),d.value===k?(n(),l("button",{key:2,onClick:B,class:"flex-1 py-3 rounded-xl bg-secondary-500 text-white font-medium hover:bg-secondary-600 transition-colors"}," ‚úì ÂÆåÊàê‰∏¶ÂÑ≤Â≠ò ")):v("",!0)])]),t[12]||(t[12]=e("div",{class:"h-24"},null,-1))]))}});export{st as default};
