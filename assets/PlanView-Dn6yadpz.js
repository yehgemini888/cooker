import{a as Ae,e as n,f as t,h as i,m as j,t as a,c as x,r as v,s as ie,F as f,g as h,x as ue,T as de,n as y,j as ce,l as ve,v as pe,i as ge,b as Be,o}from"./vendor-vue-DqfF2gyw.js";import{e as Ne,a as Ve,b as Oe,u as Ue,d as qe}from"./index-euk0EDW2.js";import{u as Ye}from"./useSmartRecipes-LzUJhbzS.js";import{h as Ee,g as Qe}from"./useIngredientImage-BuW95jah.js";import"./vendor-supabase-Dq-Jb853.js";const Ge={class:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 pb-24"},He={class:"bg-white shadow-sm sticky top-0 z-20"},Je={class:"px-4 py-4"},Ke={class:"flex items-center justify-between"},Xe={class:"text-sm text-gray-500"},Ze={class:"font-semibold text-purple-600"},et={key:0,class:"px-4 py-4 space-y-4"},tt={class:"bg-white rounded-2xl shadow-md p-4"},st={class:"flex items-center justify-between mb-4"},lt={class:"font-semibold text-gray-800"},nt={class:"grid grid-cols-7 gap-1"},ot=["onClick"],at={class:"text-xs"},rt={key:0,class:"w-5 h-5 mt-0.5"},it=["src"],ut={key:1,class:"w-2 h-2 bg-purple-500 rounded-full mt-1"},dt={class:"bg-white rounded-2xl shadow-md p-4"},ct={class:"flex items-center justify-between mb-3"},vt={class:"font-semibold text-gray-800"},pt={key:0,class:"text-xs text-gray-500"},gt={key:0,class:"space-y-3"},xt=["onClick"],ft={class:"font-medium text-gray-800"},ht={class:"text-xs text-gray-500"},yt={class:"flex items-center gap-1"},mt=["onClick"],bt=["onClick"],_t={key:1,class:"text-center py-6"},wt={key:0,class:"fixed inset-x-0 bottom-0 z-30 bg-white rounded-t-3xl shadow-2xl max-h-[70vh] flex flex-col"},kt={class:"p-4 border-b flex items-center justify-between flex-shrink-0"},Ct={class:"font-semibold text-gray-800"},Dt={class:"p-4 border-b flex-shrink-0"},Mt={class:"flex-1 overflow-y-auto p-4 space-y-3"},$t=["onClick"],zt={class:"flex items-start justify-between"},jt={class:"font-medium text-gray-800"},Rt={class:"text-xs text-gray-500"},St={key:0,class:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full"},Tt={key:0,class:"mt-2 text-xs text-orange-600"},Ft={key:0},Pt={key:2,class:"px-4 py-4"},It={class:"flex items-center justify-between mb-6"},Lt={key:0,class:"bg-white rounded-2xl shadow-md p-4 space-y-4"},Wt={class:"flex items-center justify-between"},At={class:"font-semibold text-gray-800"},Bt={class:"grid grid-cols-7 gap-1"},Nt=["onClick"],Vt={class:"text-sm"},Ot={key:0,class:"absolute -bottom-1 text-[10px] scale-75"},Ut={class:"text-sm text-purple-600 font-medium text-center bg-purple-50 py-2 rounded-lg"},qt={key:1,class:"space-y-4"},Yt={class:"bg-white rounded-2xl shadow-md p-4 space-y-3"},Et={class:"flex justify-between items-center"},Qt={class:"text-sm text-gray-500"},Gt={class:"space-y-3 pt-2 border-t"},Ht={class:"flex gap-1 overflow-x-auto scrollbar-hide pb-1"},Jt=["onClick"],Kt={class:"flex gap-2 flex-wrap"},Xt={class:"relative"},Zt={key:0,class:"absolute top-full left-0 mt-1 w-64 bg-white rounded-xl shadow-xl border z-30 max-h-64 overflow-hidden"},es={class:"p-2 border-b"},ts={class:"max-h-48 overflow-y-auto"},ss=["onClick"],ls={key:0,class:"text-xs text-cyan-500"},ns={class:"space-y-3 max-h-[50vh] overflow-y-auto pr-1"},os={key:0,class:"text-center py-8 text-gray-500"},as=["onClick"],rs={class:"flex items-start justify-between"},is={class:"font-medium text-gray-800"},us={class:"flex gap-2 text-xs mt-1"},ds={class:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600"},cs={key:0,class:"px-1.5 py-0.5 bg-green-100 text-green-700 rounded"},vs={key:1,class:"px-1.5 py-0.5 bg-red-100 text-red-700 rounded"},ps={key:0,class:"text-purple-500 text-xl font-bold"},gs={key:1,class:"text-gray-200 text-xl"},xs={key:0,class:"mt-2 text-xs text-orange-600 flex items-center gap-1"},fs={class:"truncate max-w-[200px]"},hs={key:1,class:"mt-2 text-xs text-green-600 flex items-center gap-1"},ys={key:2,class:"space-y-4"},ms={class:"flex gap-2 overflow-x-auto pb-2"},bs=["onClick"],_s={class:"text-xs text-gray-500"},ws={class:"text-xs text-purple-600 mt-1"},ks={class:"bg-purple-50 rounded-xl p-3"},Cs={class:"text-sm font-medium text-purple-800 mb-2"},Ds={key:0,class:"space-y-2"},Ms={class:"text-sm"},$s=["onClick"],zs={key:1,class:"text-sm text-purple-600"},js={class:"bg-white rounded-2xl shadow-md p-4"},Rs={class:"space-y-2"},Ss=["onClick"],Ts={key:0,class:"text-green-600 ml-2"},Fs={key:3,class:"space-y-4"},Ps={class:"space-y-3"},Is={class:"font-medium text-gray-800 mb-2"},Ls={key:0,class:"space-y-1"},Ws={key:1,class:"text-sm text-gray-400"},As={class:"flex gap-3 mt-6"},Bs=Ae({__name:"PlanView",setup(Ns){const xe=Be(),b=Ne(),D=Ve(),G=Oe(),Y=Ue(),{scoredRecipes:H}=Ye(),R=v(!1),M=v(!1),B=v(""),S=v("all"),fe=[{value:"all",label:"å…¨éƒ¨"},{value:"4-6",label:"4-6M"},{value:"7-9",label:"7-9M"},{value:"10-12",label:"10-12M"},{value:"12+",label:"1Y+"}],_=v(""),$=v(!1),T=v(""),F=v(!1),P=v(!1),I=v(!1),he=x(()=>{const l=T.value.toLowerCase();return l?D.ingredients.filter(s=>s.name.toLowerCase().includes(l)).slice(0,20):D.ingredients.slice(0,20)}),ye=x(()=>{if(!_.value)return"";const l=D.getIngredientById(_.value);return(l==null?void 0:l.name)||""});function me(l){_.value=l,$.value=!1,T.value=""}function be(){_.value="",T.value=""}const J=x(()=>H.value.filter(l=>{if(S.value!=="all"){const s=l.recipe.min_month,e=l.recipe.max_month;switch(S.value){case"4-6":if(s>6)return!1;break;case"7-9":if(e<7||s>9)return!1;break;case"10-12":if(e<10||s>12)return!1;break;case"12+":if(e<12)return!1;break}}return!(_.value&&!l.recipe.ingredient_ids.includes(_.value)||F.value&&!l.readyToCook||P.value&&!Y.isFavoriteRecipe(l.recipe.id)||I.value&&!Y.isRecipeLiked(l.recipe.id))})),N=v(new Date),V=l=>{const s=l.getFullYear(),e=String(l.getMonth()+1).padStart(2,"0"),r=String(l.getDate()).padStart(2,"0");return`${s}-${e}-${r}`},C=V(new Date),u=v(C),c=v(1),p=v(new Set),m=v(new Set),d=v({}),O=x(()=>N.value.getFullYear()),U=x(()=>N.value.getMonth()),K=x(()=>{const l=["ä¸€æœˆ","äºŒæœˆ","ä¸‰æœˆ","å››æœˆ","äº”æœˆ","å…­æœˆ","ä¸ƒæœˆ","å…«æœˆ","ä¹æœˆ","åæœˆ","åä¸€æœˆ","åäºŒæœˆ"];return`${O.value} å¹´ ${l[U.value]}`}),_e=x(()=>{const l=new Date,s=["é€±æ—¥","é€±ä¸€","é€±äºŒ","é€±ä¸‰","é€±å››","é€±äº”","é€±å…­"];return`${l.getMonth()+1}/${l.getDate()} ${s[l.getDay()]}`}),X=x(()=>{const l=O.value,s=U.value,r=new Date(l,s,1).getDay()||7,Ie=new Date(l,s+1,0).getDate(),A=[],Le=new Date(l,s,0).getDate();for(let g=r-1;g>0;g--){const z=Le-g+1,k=new Date(l,s-1,z),Q=V(k);A.push({date:Q,day:z,isCurrentMonth:!1,isToday:!1,isPast:Q<C,isFuture:Q>C})}for(let g=1;g<=Ie;g++){const z=new Date(l,s,g),k=V(z);A.push({date:k,day:g,isCurrentMonth:!0,isToday:k===C,isPast:k<C,isFuture:k>C})}const We=42-A.length;for(let g=1;g<=We;g++){const z=new Date(l,s+1,g),k=V(z);A.push({date:k,day:g,isCurrentMonth:!1,isToday:!1,isPast:k<C,isFuture:k>C})}return A});function q(l){return b.getMealsForDate(l).map(e=>D.recipes.find(r=>r.id===e)).filter(Boolean)}function Z(l){const s=q(l);if(s.length===0)return null;const r=s[0].ingredient_ids[0];if(!r)return null;if(Ee(r))return Qe(r);const w=D.getIngredientById(r);return(w==null?void 0:w.imageUrl)||null}function ee(){N.value=new Date(O.value,U.value-1,1)}function te(){N.value=new Date(O.value,U.value+1,1)}function we(l){u.value=l,M.value=!1}const L=x(()=>q(u.value)),se=x(()=>{const l=new Date(u.value),s=["é€±æ—¥","é€±ä¸€","é€±äºŒ","é€±ä¸‰","é€±å››","é€±äº”","é€±å…­"];return`${l.getMonth()+1}/${l.getDate()} ${s[l.getDay()]}`});function ke(l){b.removeMealFromDate(u.value,l)}function le(l){xe.push(`/recipe/${l}`)}function ne(){M.value=!0,B.value=""}function oe(){M.value=!1}const Ce=x(()=>{const l=B.value.toLowerCase();let s=H.value;return l&&(s=s.filter(e=>e.recipe.title.toLowerCase().includes(l))),s.slice(0,20)});function De(l){if(q(u.value).length>=3){alert("æ¯æ—¥æœ€å¤šå®‰æ’ 3 é“é£Ÿè­œ");return}if(!b.currentPlan){const e=b.createNewPlan([u.value]);b.savePlan(e)}b.addMealToDate(u.value,l),M.value=!1}function W(l){return l.ingredient_ids.filter(s=>!G.hasItem(s)).map(s=>{var e;return((e=D.getIngredientById(s))==null?void 0:e.name)||s})}function Me(){R.value=!0,c.value=1,p.value=new Set,m.value=new Set,d.value={},S.value="all",_.value="",F.value=!1,P.value=!1,I.value=!1}function ae(){R.value=!1}function $e(l){p.value.has(l)?p.value.delete(l):p.value.add(l),p.value=new Set(p.value)}function ze(l){m.value.has(l)?m.value.delete(l):m.value.add(l),m.value=new Set(m.value)}function je(l,s){if(d.value[s]||(d.value[s]=[]),d.value[s].length>=3){alert("æ¯æ—¥æœ€å¤šå®‰æ’ 3 é“é£Ÿè­œ");return}d.value[s].includes(l)||d.value[s].push(l)}function Re(l,s){if(d.value[s]){const e=d.value[s].indexOf(l);e>=0&&d.value[s].splice(e,1)}}function E(l){return D.recipes.find(s=>s.id===l)}function Se(){if(c.value<4){if(c.value===1&&p.value.size===0){alert("è«‹é¸æ“‡è‡³å°‘ä¸€å€‹æ—¥æœŸ");return}if(c.value===2&&m.value.size===0){alert("è«‹é¸æ“‡è‡³å°‘ä¸€é“é£Ÿè­œ");return}c.value++}}function Te(){c.value>1&&c.value--}function Fe(){const l=Array.from(p.value).sort();let s=b.currentPlan;s||(s=b.createNewPlan(l)),Object.entries(d.value).forEach(([e,r])=>{r.forEach(w=>{b.addMealToDate(e,w)})}),b.savePlan(s),ae()}const re=x(()=>Array.from(p.value).sort()),Pe=x(()=>Array.from(m.value).map(l=>E(l)).filter(Boolean));return(l,s)=>(o(),n("div",Ge,[t("header",He,[t("div",Je,[t("div",Ke,[s[9]||(s[9]=t("h1",{class:"text-xl font-bold text-gray-800"},"ğŸ“… é€±è¨ˆç•«",-1)),t("div",Xe,[s[8]||(s[8]=j(" ä»Šå¤© ",-1)),t("span",Ze,a(_e.value),1)])])])]),R.value?i("",!0):(o(),n("div",et,[t("div",tt,[t("div",st,[t("button",{onClick:ee,class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},"â†"),t("h2",lt,a(K.value),1),t("button",{onClick:te,class:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},"â†’")]),s[10]||(s[10]=t("div",{class:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500 mb-2"},[t("div",null,"ä¸€"),t("div",null,"äºŒ"),t("div",null,"ä¸‰"),t("div",null,"å››"),t("div",null,"äº”"),t("div",{class:"text-orange-500"},"å…­"),t("div",{class:"text-orange-500"},"æ—¥")],-1)),t("div",nt,[(o(!0),n(f,null,h(X.value,e=>(o(),n("div",{key:e.date,onClick:r=>we(e.date),class:y(["aspect-square p-1 rounded-lg cursor-pointer transition-all flex flex-col items-center justify-center relative",{"bg-purple-500 text-white ring-2 ring-purple-600":u.value===e.date,"bg-purple-100 ring-2 ring-purple-400 font-bold":e.isToday&&u.value!==e.date,"hover:bg-gray-100":u.value!==e.date&&!e.isToday,"text-gray-300":!e.isCurrentMonth,"text-gray-400":e.isPast&&e.isCurrentMonth&&!e.isToday,"text-gray-800":e.isFuture&&e.isCurrentMonth,"text-purple-600 font-semibold":e.isToday&&e.isCurrentMonth}])},[t("span",at,a(e.day),1),Z(e.date)?(o(),n("div",rt,[t("img",{src:Z(e.date),class:"w-full h-full object-contain rounded"},null,8,it)])):q(e.date).length>0?(o(),n("div",ut)):i("",!0)],10,ot))),128))])]),t("div",dt,[t("div",ct,[t("h3",vt," ğŸ“‹ "+a(se.value)+" çš„è¨ˆç•« ",1),L.value.length>0?(o(),n("span",pt,a(L.value.length)+"/3 é“ ",1)):i("",!0)]),L.value.length>0?(o(),n("div",gt,[(o(!0),n(f,null,h(L.value,e=>(o(),n("div",{key:e.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-xl"},[t("div",{class:"flex-1 cursor-pointer",onClick:r=>le(e.id)},[t("p",ft,a(e.title),1),t("p",ht,a(e.min_month)+"-"+a(e.max_month)+"M",1)],8,xt),t("div",yt,[t("button",{onClick:r=>le(e.id),class:"p-2 text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"æŸ¥çœ‹è©³æƒ…"}," ğŸ‘ï¸ ",8,mt),t("button",{onClick:r=>ke(e.id),class:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"åˆªé™¤"}," ğŸ—‘ï¸ ",8,bt)])]))),128)),L.value.length<3?(o(),n("button",{key:0,onClick:ne,class:"w-full py-3 border-2 border-dashed border-purple-300 text-purple-600 rounded-xl hover:bg-purple-50 transition-colors flex items-center justify-center gap-2"},[...s[11]||(s[11]=[t("span",null,"â•",-1),t("span",null,"æ–°å¢é£Ÿè­œ",-1)])])):i("",!0)])):(o(),n("div",_t,[s[13]||(s[13]=t("p",{class:"text-gray-400 mb-4"},"ğŸ“­ å°šæœªå®‰æ’é£Ÿè­œ",-1)),t("button",{onClick:ne,class:"px-6 py-3 bg-purple-500 text-white rounded-xl font-medium hover:bg-purple-600 transition-colors flex items-center justify-center gap-2 mx-auto"},[...s[12]||(s[12]=[t("span",null,"â•",-1),t("span",null,"æ–°å¢é£Ÿè­œ",-1)])])]))]),ie(de,{name:"slide-up"},{default:ue(()=>[M.value?(o(),n("div",wt,[t("div",kt,[t("div",null,[t("h3",Ct,"æ–°å¢é£Ÿè­œåˆ° "+a(se.value),1),s[14]||(s[14]=t("p",{class:"text-xs text-gray-500"},"é»æ“Šé¸æ“‡è¦åŠ å…¥çš„é£Ÿè­œ",-1))]),t("button",{onClick:oe,class:"p-2 hover:bg-gray-100 rounded-full"},"âœ•")]),t("div",Dt,[ve(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>B.value=e),type:"text",placeholder:"ğŸ” æœå°‹é£Ÿè­œ...",class:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[pe,B.value]])]),t("div",Mt,[(o(!0),n(f,null,h(Ce.value,e=>(o(),n("div",{key:e.recipe.id,onClick:r=>De(e.recipe.id),class:"p-4 bg-gray-50 rounded-xl cursor-pointer hover:bg-purple-50 transition-colors"},[t("div",zt,[t("div",null,[t("h4",jt,a(e.recipe.title),1),t("p",Rt,a(e.recipe.min_month)+"-"+a(e.recipe.max_month)+"M",1)]),e.readyToCook?(o(),n("span",St," âœ… å¯åš ")):i("",!0)]),W(e.recipe).length>0?(o(),n("div",Tt,[j(" ç¼º: "+a(W(e.recipe).slice(0,3).join(", "))+" ",1),W(e.recipe).length>3?(o(),n("span",Ft,"...ç­‰")):i("",!0)])):i("",!0)],8,$t))),128))])])):i("",!0)]),_:1}),ie(de,{name:"fade"},{default:ue(()=>[M.value?(o(),n("div",{key:0,onClick:oe,class:"fixed inset-0 bg-black/30 z-20"})):i("",!0)]),_:1})])),!R.value&&!M.value?(o(),n("button",{key:1,onClick:Me,class:"fixed bottom-24 left-1/2 -translate-x-1/2 z-10 px-5 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full shadow-lg hover:shadow-xl transition-all hover:-translate-y-1 flex items-center gap-2 font-medium"},[...s[15]||(s[15]=[t("span",null,"âœ¨",-1),t("span",null,"æ™ºæ…§å¼•å°",-1)])])):i("",!0),R.value?(o(),n("div",Pt,[t("div",{class:"flex items-center justify-between mb-4"},[s[16]||(s[16]=t("h2",{class:"text-lg font-bold text-gray-800"},"âœ¨ æ™ºæ…§å¼•å°",-1)),t("button",{onClick:ae,class:"p-2 hover:bg-gray-100 rounded-full"},"âœ•")]),t("div",It,[(o(),n(f,null,h(4,e=>t("div",{key:e,class:"flex items-center"},[t("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",c.value>=e?"bg-purple-500 text-white":"bg-gray-200 text-gray-500"])},a(e),3),e<4?(o(),n("div",{key:0,class:y(["w-8 h-0.5 mx-1",c.value>e?"bg-purple-500":"bg-gray-200"])},null,2)):i("",!0)])),64))]),c.value===1?(o(),n("div",Lt,[s[17]||(s[17]=t("div",null,[t("h3",{class:"font-semibold text-gray-800"},"ğŸ“† Step 1: é¸æ“‡æ—¥æœŸ"),t("p",{class:"text-sm text-gray-500"},"åªèƒ½é¸æ“‡ä»Šæ—¥åŠæœªä¾†çš„æ—¥æœŸ")],-1)),t("div",Wt,[t("button",{onClick:ee,class:"p-2 hover:bg-gray-100 rounded-lg"},"â†"),t("h2",At,a(K.value),1),t("button",{onClick:te,class:"p-2 hover:bg-gray-100 rounded-lg"},"â†’")]),s[18]||(s[18]=t("div",{class:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500"},[t("div",null,"ä¸€"),t("div",null,"äºŒ"),t("div",null,"ä¸‰"),t("div",null,"å››"),t("div",null,"äº”"),t("div",{class:"text-orange-500"},"å…­"),t("div",{class:"text-orange-500"},"æ—¥")],-1)),t("div",Bt,[(o(!0),n(f,null,h(X.value,e=>(o(),n("div",{key:e.date,onClick:r=>!e.isPast&&e.isCurrentMonth&&$e(e.date),class:y(["aspect-square p-1 rounded-lg transition-all flex items-center justify-center relative",{"bg-orange-500 text-white shadow-md transform scale-105":p.value.has(e.date),"hover:bg-gray-100 cursor-pointer":!p.value.has(e.date)&&e.isCurrentMonth&&!e.isPast,"text-gray-300 cursor-not-allowed":!e.isCurrentMonth,"bg-gray-100 text-gray-400 cursor-not-allowed opacity-50":e.isPast&&e.isCurrentMonth,"ring-2 ring-purple-400 font-bold text-purple-600":e.isToday&&!p.value.has(e.date)}])},[t("span",Vt,a(e.day),1),e.isToday&&!p.value.has(e.date)?(o(),n("span",Ot,"ä»Šå¤©")):i("",!0)],10,Nt))),128))]),t("p",Ut,"å·²é¸æ“‡ "+a(p.value.size)+" å€‹æ—¥æœŸ",1)])):i("",!0),c.value===2?(o(),n("div",qt,[t("div",Yt,[t("div",Et,[s[19]||(s[19]=t("h3",{class:"font-semibold text-gray-800"},"ğŸ³ Step 2: é¸æ“‡é£Ÿè­œ",-1)),t("span",Qt,"å·²é¸ "+a(m.value.size)+" é“",1)]),t("div",Gt,[t("div",Ht,[(o(),n(f,null,h(fe,e=>t("button",{key:e.value,onClick:r=>S.value=e.value,class:y(["flex-shrink-0 px-3 py-1.5 rounded-full text-xs font-medium transition-all border",S.value===e.value?"bg-purple-500 text-white border-purple-500":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"])},a(e.label),11,Jt)),64))]),t("div",Kt,[t("div",Xt,[t("button",{onClick:s[1]||(s[1]=e=>$.value=!$.value),class:y(["px-3 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-1 border",_.value?"bg-cyan-500 text-white border-cyan-500":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"])},[s[20]||(s[20]=t("span",null,"ğŸ¥•",-1)),t("span",null,a(ye.value||"é¸æ“‡é£Ÿæ"),1),_.value?(o(),n("span",{key:0,onClick:ce(be,["stop"]),class:"ml-1"},"âœ•")):i("",!0)],2),$.value?(o(),n("div",Zt,[t("div",es,[ve(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>T.value=e),type:"text",placeholder:"æœå°‹é£Ÿæ...",class:"w-full px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",onClick:s[3]||(s[3]=ce(()=>{},["stop"]))},null,512),[[pe,T.value]])]),t("div",ts,[(o(!0),n(f,null,h(he.value,e=>(o(),n("button",{key:e.id,onClick:r=>me(e.id),class:y(["w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",{"bg-cyan-50":_.value===e.id}])},[t("span",null,a(e.name),1),ge(G).hasItem(e.id)?(o(),n("span",ls,"ğŸ§Š")):i("",!0)],10,ss))),128))])])):i("",!0)]),t("button",{onClick:s[4]||(s[4]=e=>F.value=!F.value),class:y(["px-3 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-1 border",F.value?"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"])},[...s[21]||(s[21]=[t("span",null,"ğŸ§Š",-1),j(" å¯åš ",-1)])],2),t("button",{onClick:s[5]||(s[5]=e=>P.value=!P.value),class:y(["px-3 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-1 border",P.value?"bg-red-500 text-white border-red-500":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"])},[...s[22]||(s[22]=[t("span",null,"â¤ï¸",-1),j(" æ”¶è— ",-1)])],2),t("button",{onClick:s[6]||(s[6]=e=>I.value=!I.value),class:y(["px-3 py-1.5 rounded-full text-xs font-medium transition-all flex items-center gap-1 border",I.value?"bg-yellow-500 text-white border-yellow-500":"bg-white text-gray-600 border-gray-200 hover:bg-gray-50"])},[...s[23]||(s[23]=[t("span",null,"ğŸ˜‹",-1),j(" å¯¶å¯¶æ„› ",-1)])],2)]),$.value?(o(),n("div",{key:0,onClick:s[7]||(s[7]=e=>$.value=!1),class:"fixed inset-0 z-20",style:{background:"transparent"}})):i("",!0)])]),t("div",ns,[J.value.length===0?(o(),n("div",os," æ²’æœ‰ç¬¦åˆç¯©é¸æ¢ä»¶çš„é£Ÿè­œ ")):(o(!0),n(f,{key:1},h(J.value,e=>(o(),n("div",{key:e.recipe.id,onClick:r=>ze(e.recipe.id),class:y(["bg-white rounded-xl shadow-sm p-4 cursor-pointer transition-all border border-transparent",m.value.has(e.recipe.id)?"ring-2 ring-purple-500 bg-purple-50":"hover:shadow-md hover:border-purple-100"])},[t("div",rs,[t("div",null,[t("h4",is,a(e.recipe.title),1),t("div",us,[t("span",ds,a(e.recipe.min_month)+"-"+a(e.recipe.max_month)+"M",1),e.readyToCook?(o(),n("span",cs,"å¯ç«‹å³åš")):i("",!0),ge(Y).isFavoriteRecipe(e.recipe.id)?(o(),n("span",vs,"å·²æ”¶è—")):i("",!0)])]),m.value.has(e.recipe.id)?(o(),n("span",ps,"âœ“")):(o(),n("span",gs,"+"))]),W(e.recipe).length>0?(o(),n("div",xs,[s[24]||(s[24]=t("span",null,"âš ï¸ ç¼º:",-1)),t("span",fs,a(W(e.recipe).slice(0,3).join("ã€")),1)])):(o(),n("div",hs,[...s[25]||(s[25]=[t("span",null,"âœ… é£Ÿæé½Šå…¨",-1)])]))],10,as))),128))])])):i("",!0),c.value===3?(o(),n("div",ys,[s[27]||(s[27]=t("div",{class:"bg-white rounded-2xl shadow-md p-4"},[t("h3",{class:"font-semibold text-gray-800"},"ğŸ“… Step 3: åˆ†é…é£Ÿè­œ"),t("p",{class:"text-sm text-gray-500"},"é»æ“Šæ—¥æœŸï¼Œå†é»æ“Šé£Ÿè­œé€²è¡Œåˆ†é…")],-1)),t("div",ms,[(o(!0),n(f,null,h(re.value,e=>(o(),n("div",{key:e,class:y(["flex-shrink-0 w-24 bg-white rounded-xl shadow-md p-3 text-center cursor-pointer",u.value===e?"ring-2 ring-purple-500":""]),onClick:r=>u.value=e},[t("p",_s,a(e.slice(5)),1),t("p",ws,a((d.value[e]||[]).length)+" é“",1)],10,bs))),128))]),t("div",ks,[t("p",Cs,a(u.value)+" å·²åˆ†é…ï¼š",1),(d.value[u.value]||[]).length>0?(o(),n("div",Ds,[(o(!0),n(f,null,h(d.value[u.value],e=>{var r;return o(),n("div",{key:e,class:"flex items-center justify-between bg-white rounded-lg p-2"},[t("span",Ms,a((r=E(e))==null?void 0:r.title),1),t("button",{onClick:w=>Re(e,u.value),class:"text-red-500 text-xs"},"âœ•",8,$s)])}),128))])):(o(),n("p",zs,"å°šæœªåˆ†é…"))]),t("div",js,[s[26]||(s[26]=t("p",{class:"text-sm font-medium text-gray-600 mb-3"},"é»æ“Šåˆ†é…ï¼š",-1)),t("div",Rs,[(o(!0),n(f,null,h(Pe.value,e=>(o(),n("button",{key:e.id,onClick:r=>je(e.id,u.value),class:y(["w-full text-left p-3 rounded-xl transition-all",(d.value[u.value]||[]).includes(e.id)?"bg-green-100 text-green-800":"bg-gray-50 hover:bg-gray-100"])},[j(a(e.title)+" ",1),(d.value[u.value]||[]).includes(e.id)?(o(),n("span",Ts,"âœ“")):i("",!0)],10,Ss))),128))])])])):i("",!0),c.value===4?(o(),n("div",Fs,[s[29]||(s[29]=t("div",{class:"bg-white rounded-2xl shadow-md p-4"},[t("h3",{class:"font-semibold text-gray-800"},"âœ… Step 4: ç¢ºèªé è¦½")],-1)),t("div",Ps,[(o(!0),n(f,null,h(re.value,e=>(o(),n("div",{key:e,class:"bg-white rounded-xl shadow-md p-4"},[t("p",Is,"ğŸ“… "+a(e),1),(d.value[e]||[]).length>0?(o(),n("div",Ls,[(o(!0),n(f,null,h(d.value[e],r=>{var w;return o(),n("div",{key:r,class:"text-sm text-gray-600 flex items-center gap-2"},[s[28]||(s[28]=t("span",null,"ğŸ³",-1)),t("span",null,a((w=E(r))==null?void 0:w.title),1)])}),128))])):(o(),n("p",Ws,"æœªå®‰æ’"))]))),128))])])):i("",!0),t("div",As,[c.value>1?(o(),n("button",{key:0,onClick:Te,class:"flex-1 py-3 bg-gray-200 text-gray-700 rounded-xl font-medium"},"â† ä¸Šä¸€æ­¥")):i("",!0),c.value<4?(o(),n("button",{key:1,onClick:Se,class:"flex-1 py-3 bg-purple-500 text-white rounded-xl font-medium"},"ä¸‹ä¸€æ­¥ â†’")):i("",!0),c.value===4?(o(),n("button",{key:2,onClick:Fe,class:"flex-1 py-3 bg-green-500 text-white rounded-xl font-medium"},"âœ… å®Œæˆ")):i("",!0)])])):i("",!0)]))}}),Es=qe(Bs,[["__scopeId","data-v-7d699681"]]);export{Es as default};
