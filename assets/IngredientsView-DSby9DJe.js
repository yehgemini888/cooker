import{d as S,u as F,b as z,c as d,n as _,i as o,f as y,e,t as i,o as n,a as B,F as j,h as I,r as C,l as E,j as U,_ as V}from"./index-Cph8nJxa.js";import{h as L,g as M}from"./useIngredientImage-BuW95jah.js";const T={key:0,class:"absolute top-2 left-2 z-10"},A={class:"absolute top-2 right-2 flex flex-col gap-1 z-10"},D={key:0,class:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center shadow-md"},N={key:1,class:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-md animate-pulse"},P={key:2,class:"w-6 h-6 bg-orange-400 rounded-full flex items-center justify-center shadow-md",title:"é«˜éæ•é¢¨éšªé£Ÿæ"},R={class:"aspect-square bg-white p-4"},q=["src","alt"],H={class:"p-3"},O={class:"font-semibold text-gray-800 text-center truncate"},G={class:"flex items-center justify-center gap-1 mt-2"},J={class:"text-xs px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full"},K=S({__name:"IngredientCard",props:{ingredient:{},minMonth:{}},emits:["click"],setup(p,{emit:$}){const l=p,w=$,x=F(),c=z(),k=o(()=>x.getIngredientState(l.ingredient.id)),m=o(()=>k.value.status==="tried"),u=o(()=>k.value.allergy),v=o(()=>l.ingredient.allergy_risk===!0),g=o(()=>c.hasItem(l.ingredient.id)),a=o(()=>L(l.ingredient.id)?M(l.ingredient.id):l.ingredient.imageUrl||"https://placehold.co/200x200?text=Food"),t=o(()=>l.minMonth?`${l.minMonth}m+`:"4m+"),s=o(()=>{const b={grain:"bg-amber-100 text-amber-700",vegetable:"bg-green-100 text-green-700",fruit:"bg-pink-100 text-pink-700",protein:"bg-blue-100 text-blue-700",dairy:"bg-purple-100 text-purple-700",other:"bg-gray-100 text-gray-700"};return b[l.ingredient.category]||b.other});function h(){w("click",l.ingredient)}function f(b){const r=b.target;r.src="https://placehold.co/200x200/e2e8f0/64748b?text=Food"}return(b,r)=>(n(),d("div",{onClick:h,class:_(["relative bg-white rounded-2xl shadow-md overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-xl hover:-translate-y-1 active:scale-95",{"ring-2 ring-cyan-400":g.value}])},[g.value?(n(),d("div",T,[...r[0]||(r[0]=[e("div",{class:"px-2 py-1 bg-cyan-500 text-white text-xs rounded-full shadow-md flex items-center gap-1"},[e("span",null,"ğŸ§Š"),e("span",{class:"font-medium"},"æœ‰")],-1)])])):y("",!0),e("div",A,[m.value?(n(),d("div",D,[...r[1]||(r[1]=[e("span",{class:"text-white text-xs"},"âœ“",-1)])])):y("",!0),u.value?(n(),d("div",N,[...r[2]||(r[2]=[e("span",{class:"text-white text-xs font-bold"},"!",-1)])])):y("",!0),v.value&&!u.value?(n(),d("div",P,[...r[3]||(r[3]=[e("span",{class:"text-white text-xs"},"âš ",-1)])])):y("",!0)]),e("div",R,[e("img",{src:a.value,alt:p.ingredient.name,class:"w-full h-full object-contain rounded-xl",loading:"lazy",onError:f},null,40,q)]),e("div",H,[e("h3",O,i(p.ingredient.name),1),e("div",G,[e("span",J,i(t.value),1),e("span",{class:_(["text-xs px-2 py-0.5 rounded-full",s.value])},i({grain:"ç©€",vegetable:"è”¬",fruit:"æœ",protein:"è›‹ç™½",dairy:"ä¹³",other:"å…¶ä»–"}[p.ingredient.category]),3)])]),e("div",{class:_(["h-1 w-full",{"bg-cyan-500":g.value&&!u.value,"bg-green-500":m.value&&!u.value&&!g.value,"bg-red-500":u.value,"bg-gray-200":!m.value&&!u.value&&!g.value}])},null,2)],2))}}),Q={class:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 pb-24"},W={class:"container mx-auto px-4 py-4"},X={class:"grid grid-cols-4 gap-3"},Y={class:"bg-white rounded-xl shadow-md p-3 text-center"},Z={class:"text-2xl font-bold text-gray-800"},ee={class:"bg-white rounded-xl shadow-md p-3 text-center"},te={class:"text-2xl font-bold text-green-500"},se={class:"bg-white rounded-xl shadow-md p-3 text-center"},le={class:"text-2xl font-bold text-red-500"},ne={class:"bg-white rounded-xl shadow-md p-3 text-center"},ae={class:"text-2xl font-bold text-blue-500"},re={class:"container mx-auto px-4 mb-4"},oe={class:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide"},ie=["onClick"],de={class:"container mx-auto px-4 mb-4"},ue={class:"flex gap-2 overflow-x-auto pb-2"},ce=["onClick"],ge={class:"container mx-auto px-4"},xe={class:"grid grid-cols-3 gap-4"},ve={key:0,class:"text-center py-16 text-gray-500"},pe=S({__name:"IngredientsView",setup(p){const $=U(),l=B(),w=F();z();const x=C("all"),c=C("all"),k=[{value:"all",label:"å…¨éƒ¨",emoji:"ğŸ“‹"},{value:"grain",label:"ç©€ç‰©",emoji:"ğŸŒ¾"},{value:"vegetable",label:"è”¬èœ",emoji:"ğŸ¥¬"},{value:"fruit",label:"æ°´æœ",emoji:"ğŸ"},{value:"protein",label:"è›‹ç™½è³ª",emoji:"ğŸ¥©"},{value:"dairy",label:"ä¹³è£½å“",emoji:"ğŸ¥›"},{value:"other",label:"å…¶ä»–",emoji:"ğŸ§‚"}],m=[{value:"all",label:"å…¨éƒ¨"},{value:"tried",label:"å·²å˜—è©¦"},{value:"not_tried",label:"æœªå˜—è©¦"},{value:"allergy",label:"éæ•"}],u=o(()=>l.ingredients.filter(a=>{if(x.value!=="all"&&a.category!==x.value)return!1;const t=w.getIngredientState(a.id);return!(c.value==="tried"&&t.status!=="tried"||c.value==="not_tried"&&t.status!=="not_tried"||c.value==="allergy"&&!t.allergy)})),v=o(()=>{let a=0,t=0,s=0;return l.ingredients.forEach(h=>{const f=w.getIngredientState(h.id);f.status==="tried"&&a++,f.allergy&&t++,f.status==="not_tried"&&s++}),{tried:a,allergy:t,notTried:s,total:l.ingredients.length}});function g(a){$.push(`/ingredient/${a.id}`)}return(a,t)=>(n(),d("div",Q,[t[5]||(t[5]=e("header",{class:"bg-white shadow-sm sticky top-0 z-20"},[e("div",{class:"container mx-auto px-4 py-4"},[e("div",{class:"flex items-center justify-center"},[e("h1",{class:"text-xl font-bold text-gray-800"},"ğŸ“– é£Ÿæåœ–é‘‘")])])],-1)),e("div",W,[e("div",X,[e("div",Y,[e("p",Z,i(v.value.total),1),t[0]||(t[0]=e("p",{class:"text-xs text-gray-500"},"ç¸½é£Ÿæ",-1))]),e("div",ee,[e("p",te,i(v.value.tried),1),t[1]||(t[1]=e("p",{class:"text-xs text-gray-500"},"å·²å˜—è©¦",-1))]),e("div",se,[e("p",le,i(v.value.allergy),1),t[2]||(t[2]=e("p",{class:"text-xs text-gray-500"},"éæ•",-1))]),e("div",ne,[e("p",ae,i(v.value.notTried),1),t[3]||(t[3]=e("p",{class:"text-xs text-gray-500"},"æœªå˜—è©¦",-1))])])]),e("div",re,[e("div",oe,[(n(),d(j,null,I(k,s=>e("button",{key:s.value,onClick:h=>x.value=s.value,class:_(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all",x.value===s.value?"bg-primary-500 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 shadow"])},i(s.emoji)+" "+i(s.label),11,ie)),64))])]),e("div",de,[e("div",ue,[(n(),d(j,null,I(m,s=>e("button",{key:s.value,onClick:h=>c.value=s.value,class:_(["flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-all",c.value===s.value?"bg-gray-800 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},i(s.label),11,ce)),64))])]),e("div",ge,[e("div",xe,[(n(!0),d(j,null,I(u.value,s=>(n(),E(K,{key:s.id,ingredient:s,"min-month":4,onClick:g},null,8,["ingredient"]))),128))]),u.value.length===0?(n(),d("div",ve,[...t[4]||(t[4]=[e("p",{class:"text-5xl mb-4"},"ğŸ”",-1),e("p",null,"æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„é£Ÿæ",-1)])])):y("",!0)])]))}}),fe=V(pe,[["__scopeId","data-v-b85bd01e"]]);export{fe as default};
