import{a as B,e as o,f as e,t as a,i as n,h as d,c as P,s as $,x as j,E as F,n as i,F as _,g as v,k as U,m as S,b as z,o as r}from"./vendor-vue-DqfF2gyw.js";import{a as A,e as E,f as M}from"./index-B5oCUIfI.js";import{h as O,g as R}from"./useIngredientImage-BuW95jah.js";import"./vendor-supabase-Dq-Jb853.js";const q={class:"min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50 pb-24"},G={class:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg sticky top-0 z-20"},H={class:"px-4 py-4"},J={class:"flex items-center justify-between"},K={class:"text-right"},Q={class:"text-2xl font-bold"},X={class:"px-4 py-4 space-y-4"},Y={key:0,class:"bg-white rounded-2xl shadow-md p-8 text-center text-gray-500"},Z={key:1,class:"bg-white rounded-2xl shadow-md p-8 text-center"},ee={key:2,class:"bg-white rounded-2xl shadow-md overflow-hidden"},te={class:"px-4 py-3 bg-gradient-to-r from-red-500 to-orange-500 text-white"},se={class:"flex items-center justify-between"},ne={class:"text-sm bg-white/20 px-2 py-0.5 rounded-full"},oe={class:"px-4 py-3 bg-orange-50 flex gap-2"},re={class:"divide-y divide-gray-100"},le=["onClick"],ie={key:0,class:"text-sm"},ae=["onClick"],de=["src","alt"],ce={class:"flex-1 min-w-0"},ue={class:"text-xs text-gray-400"},ge=["onClick"],he={key:3,class:"bg-white rounded-2xl shadow-md overflow-hidden"},pe={class:"px-4 py-3 bg-gradient-to-r from-blue-400 to-blue-500 text-white"},xe={class:"flex items-center justify-between"},fe={class:"text-sm bg-white/20 px-2 py-0.5 rounded-full"},be={class:"divide-y divide-gray-100"},ye=["onClick"],_e={key:0,class:"text-sm"},ve=["onClick"],me=["src","alt"],ke={class:"flex-1 min-w-0"},we={class:"text-xs text-gray-400"},Ce=["onClick"],Ie={key:4,class:"bg-white rounded-2xl shadow-md overflow-hidden"},Pe={class:"px-4 py-3 bg-gray-400 text-white"},$e={class:"flex items-center justify-between"},je={class:"text-sm bg-white/20 px-2 py-0.5 rounded-full"},Se={class:"divide-y divide-gray-100"},De=["onClick"],Le={key:0,class:"text-sm"},Te=["onClick"],We=["src","alt"],Ve={class:"flex-1 min-w-0"},Ne={class:"text-xs text-gray-400"},Be={key:5,class:"bg-amber-50 rounded-xl p-4 border border-amber-100"},Me=B({__name:"ShoppingListView",setup(Fe){const D=z(),L=A(),m=E(),T=P(()=>m.currentPlan?Object.values(m.currentPlan.meals).some(l=>l.length>0):!1),{shoppingList:k,thisWeekList:u,nextWeekList:g,laterList:h,thisWeekPendingCount:W,togglePurchased:p,markPurchasedAndAddToPantry:w,markThisWeekPurchased:C,addThisWeekPurchasedToPantry:V}=M();function x(l){if(O(l))return R(l);const s=L.getIngredientById(l);return(s==null?void 0:s.imageUrl)||"https://placehold.co/80x80/e2e8f0/64748b?text=Food"}function f(l){D.push(`/ingredient/${l}`)}const b=P(()=>u.value.filter(l=>l.purchased).length);function N(){if(b.value===0){alert("請先勾選已購買的食材");return}confirm(`確定將 ${b.value} 項本周食材加入冰箱？`)&&V()}function y(l){const s=new Date(l);return`${s.getMonth()+1}/${s.getDate()}`}return(l,s)=>{const I=F("router-link");return r(),o("div",q,[e("header",G,[e("div",H,[e("div",J,[s[2]||(s[2]=e("h1",{class:"text-xl font-bold flex items-center gap-2"},[e("span",null,"🛒"),e("span",null,"購物清單")],-1)),e("div",K,[e("p",Q,a(n(W)),1),s[1]||(s[1]=e("p",{class:"text-xs opacity-80"},"本周待購",-1))])])])]),e("div",X,[T.value?n(k).length===0?(r(),o("div",Z,[s[8]||(s[8]=e("div",{class:"text-5xl mb-4"},"🎉",-1)),s[9]||(s[9]=e("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"冰箱食材充足！",-1)),s[10]||(s[10]=e("p",{class:"text-gray-500 text-sm mb-4"}," 本週計畫所需的食材都在冰箱裡了 ",-1)),$(I,{to:"/plan",class:"inline-block px-6 py-2 bg-orange-500 text-white rounded-xl text-sm hover:bg-orange-600 transition-colors"},{default:j(()=>[...s[7]||(s[7]=[S(" 查看週計畫 ",-1)])]),_:1})])):d("",!0):(r(),o("div",Y,[s[4]||(s[4]=e("div",{class:"text-5xl mb-4"},"👶",-1)),s[5]||(s[5]=e("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"這周還沒有幫寶寶安排食譜唷!",-1)),s[6]||(s[6]=e("p",{class:"text-sm mb-4"}," 讓我們一起和寶寶一起探索食物吧! ",-1)),$(I,{to:"/plan",class:"inline-block px-6 py-2 bg-purple-500 text-white rounded-xl text-sm hover:bg-purple-600 transition-colors"},{default:j(()=>[...s[3]||(s[3]=[S(" 前往安排食譜 ",-1)])]),_:1})])),n(u).length>0?(r(),o("div",ee,[e("div",te,[e("div",se,[s[11]||(s[11]=e("h2",{class:"font-bold flex items-center gap-2"},[e("span",null,"🔥"),e("span",null,"本周要買"),e("span",{class:"text-xs opacity-80 font-normal"},"（這幾天需要用）")],-1)),e("span",ne,a(n(u).length)+" 項 ",1)])]),e("div",oe,[e("button",{onClick:s[0]||(s[0]=(...t)=>n(C)&&n(C)(...t)),class:"flex-1 py-2 text-sm bg-white text-gray-700 rounded-xl hover:bg-gray-100 transition-colors border"}," 全選本周 "),e("button",{onClick:N,class:i(["flex-1 py-2 text-sm bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors",{"opacity-50 cursor-not-allowed":b.value===0}])}," ✓ 加入冰箱 ",2)]),e("div",re,[(r(!0),o(_,null,v(n(u),t=>(r(),o("div",{key:t.ingredientId,class:i(["flex items-center gap-3 p-4 transition-all",{"bg-green-50 opacity-60":t.purchased}])},[e("button",{onClick:c=>n(p)(t.ingredientId),class:i(["w-7 h-7 rounded-lg border-2 flex items-center justify-center flex-shrink-0 transition-all",t.purchased?"bg-green-500 border-green-500 text-white":"border-orange-400 hover:border-green-400"])},[t.purchased?(r(),o("span",ie,"✓")):d("",!0)],10,le),e("div",{onClick:c=>f(t.ingredientId),class:"w-11 h-11 rounded-xl overflow-hidden bg-white flex-shrink-0 cursor-pointer"},[e("img",{src:x(t.ingredientId),alt:t.name,class:i(["w-full h-full object-contain",{grayscale:t.purchased}])},null,10,de)],8,ae),e("div",ce,[e("p",{class:i(["font-medium truncate",t.purchased?"text-gray-400 line-through":"text-gray-800"])},a(t.name),3),e("p",ue,a(y(t.earliestDate))+" 需要用 ",1)]),t.purchased?d("",!0):(r(),o("button",{key:0,onClick:c=>n(w)(t.ingredientId),class:"px-3 py-1 text-xs bg-cyan-100 text-cyan-700 rounded-full hover:bg-cyan-200 transition-colors flex-shrink-0"}," 🧊 買了 ",8,ge))],2))),128))])])):d("",!0),n(g).length>0?(r(),o("div",he,[e("div",pe,[e("div",xe,[s[12]||(s[12]=e("h2",{class:"font-bold flex items-center gap-2"},[e("span",null,"📅"),e("span",null,"下周再買"),e("span",{class:"text-xs opacity-80 font-normal"},"（不急，下周才用）")],-1)),e("span",fe,a(n(g).length)+" 項 ",1)])]),e("div",be,[(r(!0),o(_,null,v(n(g),t=>(r(),o("div",{key:t.ingredientId,class:i(["flex items-center gap-3 p-4 transition-all",{"bg-green-50 opacity-60":t.purchased}])},[e("button",{onClick:c=>n(p)(t.ingredientId),class:i(["w-7 h-7 rounded-lg border-2 flex items-center justify-center flex-shrink-0 transition-all",t.purchased?"bg-green-500 border-green-500 text-white":"border-blue-400 hover:border-green-400"])},[t.purchased?(r(),o("span",_e,"✓")):d("",!0)],10,ye),e("div",{onClick:c=>f(t.ingredientId),class:"w-11 h-11 rounded-xl overflow-hidden bg-white flex-shrink-0 cursor-pointer"},[e("img",{src:x(t.ingredientId),alt:t.name,class:i(["w-full h-full object-contain",{grayscale:t.purchased}])},null,10,me)],8,ve),e("div",ke,[e("p",{class:i(["font-medium truncate",t.purchased?"text-gray-400 line-through":"text-gray-800"])},a(t.name),3),e("p",we,a(y(t.earliestDate))+" 需要用",1)]),t.purchased?d("",!0):(r(),o("button",{key:0,onClick:c=>n(w)(t.ingredientId),class:"px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-full hover:bg-blue-200 transition-colors flex-shrink-0"}," 🧊 買了 ",8,Ce))],2))),128))])])):d("",!0),n(h).length>0?(r(),o("div",Ie,[e("div",Pe,[e("div",$e,[s[13]||(s[13]=e("h2",{class:"font-bold flex items-center gap-2"},[e("span",null,"⏳"),e("span",null,"之後再買"),e("span",{class:"text-xs opacity-80 font-normal"},"（兩周後才需要）")],-1)),e("span",je,a(n(h).length)+" 項 ",1)])]),e("div",Se,[(r(!0),o(_,null,v(n(h),t=>(r(),o("div",{key:t.ingredientId,class:i(["flex items-center gap-3 p-4 transition-all opacity-60",{"bg-green-50":t.purchased}])},[e("button",{onClick:c=>n(p)(t.ingredientId),class:i(["w-7 h-7 rounded-lg border-2 flex items-center justify-center flex-shrink-0",t.purchased?"bg-green-500 border-green-500 text-white":"border-gray-300"])},[t.purchased?(r(),o("span",Le,"✓")):d("",!0)],10,De),e("div",{onClick:c=>f(t.ingredientId),class:"w-11 h-11 rounded-xl overflow-hidden bg-white flex-shrink-0 cursor-pointer"},[e("img",{src:x(t.ingredientId),alt:t.name,class:"w-full h-full object-contain grayscale"},null,8,We)],8,Te),e("div",Ve,[e("p",{class:i(["font-medium truncate text-gray-500",{"line-through":t.purchased}])},a(t.name),3),e("p",Ne,a(y(t.earliestDate))+" 才需要",1)])],2))),128))])])):d("",!0),n(k).length>0?(r(),o("div",Be,[...s[14]||(s[14]=[U('<p class="text-sm text-amber-700"> 💡 <strong>新鮮購物小提示：</strong></p><ul class="text-sm text-amber-700 mt-2 space-y-1"><li>🔥 <strong>本周要買</strong>：這幾天的食譜會用到，建議盡快購買</li><li>📅 <strong>下周再買</strong>：不急著買，下周才會用到</li><li>⏳ <strong>之後再買</strong>：兩周後才需要，現在不用買</li></ul>',2)])])):d("",!0)])])}}});export{Me as default};
