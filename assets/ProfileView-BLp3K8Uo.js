import{d as $,u as A,a as D,r as b,c as r,b as t,e as c,t as d,f as x,w as k,v as j,F as I,g as C,h as T,i as L,o as a,n as f,_ as R}from"./index-CM1B4TUq.js";import{u as q}from"./user-66ZOsVIB.js";import{h as H,g as M}from"./useIngredientImage-BuW95jah.js";const G={class:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 pb-24"},J={class:"container mx-auto px-4 py-4"},K={class:"bg-white rounded-2xl shadow-lg p-5 mb-6"},O={class:"flex items-center justify-between mb-4"},Q={key:0,class:"space-y-3"},W={class:"flex items-center gap-4"},X={class:"text-xl font-bold text-gray-800"},Y={class:"text-gray-500"},Z={class:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-100"},tt={class:"text-center"},et={class:"text-2xl font-bold text-green-500"},st={class:"text-center"},ot={class:"text-2xl font-bold text-red-500"},lt={class:"text-center"},rt={class:"text-2xl font-bold text-blue-500"},at={key:1,class:"space-y-4"},nt={class:"bg-white rounded-2xl shadow-lg p-5"},it={class:"flex gap-2 overflow-x-auto pb-3 mb-4 scrollbar-hide"},dt=["onClick"],ut={class:"grid grid-cols-3 gap-3"},ct=["onClick"],gt={class:"absolute top-1 right-1 flex flex-wrap gap-0.5 z-10 max-w-[60%] justify-end"},xt={key:0,class:"w-5 h-5 bg-cyan-500 rounded-full flex items-center justify-center shadow text-xs",title:"å†°ç®±æœ‰"},ft={key:1,class:"w-5 h-5 bg-orange-400 rounded-full flex items-center justify-center shadow text-xs",title:"é«˜éæ•é¢¨éšª"},mt={key:2,class:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center shadow text-xs animate-pulse",title:"éæ•"},pt={key:3,class:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center shadow text-xs",title:"å·²å˜—è©¦"},yt=["src","alt"],bt={class:"p-2 text-center"},vt={key:0,class:"text-center py-12 text-gray-500"},ht=$({__name:"ProfileView",setup(_t){const S=L(),l=q(),v=A(),B=D(),g=b(!1),m=b(l.babyName),p=b(l.birthday),y=b("all"),F=[{value:"all",label:"å…¨éƒ¨",emoji:"ğŸ“‹"},{value:"grain",label:"ç©€ç‰©",emoji:"ğŸŒ¾"},{value:"vegetable",label:"è”¬èœ",emoji:"ğŸ¥¬"},{value:"fruit",label:"æ°´æœ",emoji:"ğŸ"},{value:"protein",label:"è›‹ç™½è³ª",emoji:"ğŸ¥©"},{value:"dairy",label:"ä¹³è£½å“",emoji:"ğŸ¥›"}],h=T(()=>{let o=v.ingredients;return y.value!=="all"&&(o=o.filter(s=>s.category===y.value)),[...o].sort((s,e)=>{const u=l.getIngredientState(s.id),w=l.getIngredientState(e.id);return u.status==="tried"&&w.status!=="tried"?-1:u.status!=="tried"&&w.status==="tried"?1:0})});function N(){l.setBabyInfo(m.value,p.value),g.value=!1}function P(){m.value=l.babyName,p.value=l.birthday,g.value=!1}function U(o){S.push(`/ingredient/${o.id}`)}function V(o,s){return H(o)?M(o):s||"https://placehold.co/200x200/e2e8f0/64748b?text=Food"}function _(o){return l.getIngredientState(o)}function n(o){return _(o).status==="tried"}function i(o){return _(o).allergy}function z(o){return B.hasItem(o)}function E(o){return o.allergy_risk===!0}return(o,s)=>(a(),r("div",G,[s[13]||(s[13]=t("header",{class:"bg-white shadow-sm sticky top-0 z-20"},[t("div",{class:"container mx-auto px-4 py-4"},[t("div",{class:"flex items-center justify-center"},[t("h1",{class:"text-xl font-bold text-gray-800"},"ğŸ‘¶ å¯¶å¯¶è³‡æ–™")])])],-1)),t("div",J,[t("div",K,[t("div",O,[s[4]||(s[4]=t("h2",{class:"text-lg font-semibold text-gray-800"},"å¯¶å¯¶è³‡è¨Š",-1)),g.value?c("",!0):(a(),r("button",{key:0,onClick:s[0]||(s[0]=e=>g.value=!0),class:"text-primary-500 hover:text-primary-600 text-sm font-medium"}," âœï¸ ç·¨è¼¯ "))]),g.value?(a(),r("div",at,[t("div",null,[s[9]||(s[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"å¯¶å¯¶åç¨±",-1)),k(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),type:"text",placeholder:"è¼¸å…¥å¯¶å¯¶çš„åå­—",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[j,m.value]])]),t("div",null,[s[10]||(s[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"å‡ºç”Ÿæ—¥æœŸ",-1)),k(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>p.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[j,p.value]])]),t("div",{class:"flex gap-2"},[t("button",{onClick:N,class:"flex-1 bg-primary-500 text-white py-2 rounded-lg hover:bg-primary-600 transition-colors font-medium"}," å„²å­˜ "),t("button",{onClick:P,class:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition-colors font-medium"}," å–æ¶ˆ ")])])):(a(),r("div",Q,[t("div",W,[s[5]||(s[5]=t("div",{class:"w-16 h-16 bg-gradient-to-br from-primary-400 to-secondary-400 rounded-full flex items-center justify-center text-3xl shadow-lg"}," ğŸ‘¶ ",-1)),t("div",null,[t("p",X,d(x(l).babyName||"é»æ“Šç·¨è¼¯è¨­å®šå¯¶å¯¶è³‡æ–™"),1),t("p",Y,d(x(l).getAgeDisplay),1)])]),t("div",Z,[t("div",tt,[t("p",et,d(x(l).triedIngredientsCount),1),s[6]||(s[6]=t("p",{class:"text-xs text-gray-500"},"å·²å˜—è©¦",-1))]),t("div",st,[t("p",ot,d(x(l).allergyIngredientsCount),1),s[7]||(s[7]=t("p",{class:"text-xs text-gray-500"},"éæ•é£Ÿæ",-1))]),t("div",lt,[t("p",rt,d(x(v).ingredients.length),1),s[8]||(s[8]=t("p",{class:"text-xs text-gray-500"},"ç¸½é£Ÿææ•¸",-1))])])]))]),t("div",nt,[s[12]||(s[12]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"ğŸ—ºï¸"),t("span",null,"é£Ÿææ¢ç´¢ç‰†")],-1)),t("div",it,[(a(),r(I,null,C(F,e=>t("button",{key:e.value,onClick:u=>y.value=e.value,class:f(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all",y.value===e.value?"bg-primary-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},d(e.emoji)+" "+d(e.label),11,dt)),64))]),t("div",ut,[(a(!0),r(I,null,C(h.value,e=>(a(),r("div",{key:e.id,onClick:u=>U(e),class:f(["relative bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 active:scale-95 border",{"border-green-400":n(e.id)&&!i(e.id),"border-red-400":i(e.id),"border-gray-200":!n(e.id)&&!i(e.id)}])},[t("div",gt,[z(e.id)?(a(),r("span",xt," ğŸ§Š ")):c("",!0),E(e)&&!i(e.id)?(a(),r("span",ft," âš ï¸ ")):c("",!0),i(e.id)?(a(),r("span",mt," â— ")):c("",!0),n(e.id)?(a(),r("span",pt," âœ… ")):c("",!0)]),t("div",{class:f(["aspect-square p-2 bg-white",{"grayscale opacity-50":!n(e.id),"":n(e.id)}])},[t("img",{src:V(e.id,e.imageUrl),alt:e.name,class:"w-full h-full object-contain rounded-lg",loading:"lazy",onError:s[3]||(s[3]=u=>u.target.src="https://placehold.co/200x200/e2e8f0/64748b?text=Food")},null,40,yt)],2),t("div",bt,[t("p",{class:f(["text-sm font-medium truncate",{"text-gray-800":n(e.id),"text-gray-400":!n(e.id)}])},d(e.name),3)]),t("div",{class:f(["h-1 w-full",{"bg-green-500":n(e.id)&&!i(e.id),"bg-red-500":i(e.id),"bg-gray-200":!n(e.id)&&!i(e.id)}])},null,2)],10,ct))),128))]),h.value.length===0?(a(),r("div",vt,[...s[11]||(s[11]=[t("p",{class:"text-4xl mb-2"},"ğŸ”",-1),t("p",null,"æ²’æœ‰ç¬¦åˆç¯©é¸æ¢ä»¶çš„é£Ÿæ",-1)])])):c("",!0)])])]))}}),It=R(ht,[["__scopeId","data-v-25e6e8de"]]);export{It as default};
