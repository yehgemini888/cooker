import{a as D,r as b,e as r,f as t,i as c,h as g,t as d,l as C,v as I,F as S,g as B,c as H,b as T,o as a,n as f}from"./vendor-vue-DqfF2gyw.js";import{u as L,a as M,b as O,c as R,d as q}from"./index-CuI3qBSg.js";import{h as G,g as J}from"./useIngredientImage-BuW95jah.js";import"./vendor-supabase-Dq-Jb853.js";const K={class:"min-h-screen bg-gradient-to-br from-orange-50 to-green-50 pb-24"},Q={class:"bg-white shadow-sm sticky top-0 z-20"},W={class:"container mx-auto px-4 py-4"},X={class:"flex items-center justify-between"},Y=["disabled"],Z={class:"container mx-auto px-4 py-4"},tt={class:"bg-white rounded-2xl shadow-lg p-5 mb-6"},et={class:"flex items-center justify-between mb-4"},st={key:0,class:"space-y-3"},ot={class:"flex items-center gap-4"},lt={class:"text-xl font-bold text-gray-800"},rt={class:"text-gray-500"},at={class:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-100"},nt={class:"text-center"},it={class:"text-2xl font-bold text-green-500"},dt={class:"text-center"},ut={class:"text-2xl font-bold text-red-500"},ct={class:"text-center"},gt={class:"text-2xl font-bold text-blue-500"},xt={key:1,class:"space-y-4"},ft={class:"bg-white rounded-2xl shadow-lg p-5"},mt={class:"flex gap-2 overflow-x-auto pb-3 mb-4 scrollbar-hide"},pt=["onClick"],yt={class:"grid grid-cols-3 gap-3"},bt=["onClick"],vt={class:"absolute top-1 right-1 flex flex-wrap gap-0.5 z-10 max-w-[60%] justify-end"},ht={key:0,class:"w-5 h-5 bg-cyan-500 rounded-full flex items-center justify-center shadow text-xs",title:"å†°ç®±æœ‰"},_t={key:1,class:"w-5 h-5 bg-orange-400 rounded-full flex items-center justify-center shadow text-xs",title:"é«˜éæ•é¢¨éšª"},wt={key:2,class:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center shadow text-xs animate-pulse",title:"éæ•"},kt={key:3,class:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center shadow text-xs",title:"å·²å˜—è©¦"},jt=["src","alt"],Ct={class:"p-2 text-center"},It={key:0,class:"text-center py-12 text-gray-500"},St=D({__name:"ProfileView",setup(Bt){const v=T(),l=L(),h=M(),V=O(),_=R();async function F(){await _.signOut(),v.push("/auth")}const x=b(!1),m=b(l.babyName),p=b(l.birthday),y=b("all"),N=[{value:"all",label:"å…¨éƒ¨",emoji:"ğŸ“‹"},{value:"grain",label:"ç©€ç‰©",emoji:"ğŸŒ¾"},{value:"vegetable",label:"è”¬èœ",emoji:"ğŸ¥¬"},{value:"fruit",label:"æ°´æœ",emoji:"ğŸ"},{value:"protein",label:"è›‹ç™½è³ª",emoji:"ğŸ¥©"},{value:"dairy",label:"ä¹³è£½å“",emoji:"ğŸ¥›"}],w=H(()=>{let o=h.ingredients;return y.value!=="all"&&(o=o.filter(e=>e.category===y.value)),[...o].sort((e,s)=>{const u=l.getIngredientState(e.id),j=l.getIngredientState(s.id);return u.status==="tried"&&j.status!=="tried"?-1:u.status!=="tried"&&j.status==="tried"?1:0})});function P(){l.setBabyInfo(m.value,p.value),x.value=!1}function U(){m.value=l.babyName,p.value=l.birthday,x.value=!1}function z(o){v.push(`/ingredient/${o.id}`)}function A(o,e){return G(o)?J(o):e||"https://placehold.co/200x200/e2e8f0/64748b?text=Food"}function k(o){return l.getIngredientState(o)}function n(o){return k(o).status==="tried"}function i(o){return k(o).allergy}function E(o){return V.hasItem(o)}function $(o){return o.allergy_risk===!0}return(o,e)=>(a(),r("div",K,[t("header",Q,[t("div",W,[t("div",X,[e[5]||(e[5]=t("div",{class:"w-10"},null,-1)),e[6]||(e[6]=t("h1",{class:"text-xl font-bold text-gray-800"},"ğŸ‘¶ å¯¶å¯¶è³‡æ–™",-1)),t("button",{onClick:F,disabled:c(_).loading,class:"w-10 h-10 flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",title:"ç™»å‡º"},[...e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1)])],8,Y)])])]),t("div",Z,[t("div",tt,[t("div",et,[e[7]||(e[7]=t("h2",{class:"text-lg font-semibold text-gray-800"},"å¯¶å¯¶è³‡è¨Š",-1)),x.value?g("",!0):(a(),r("button",{key:0,onClick:e[0]||(e[0]=s=>x.value=!0),class:"text-primary-500 hover:text-primary-600 text-sm font-medium"}," âœï¸ ç·¨è¼¯ "))]),x.value?(a(),r("div",xt,[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"å¯¶å¯¶åç¨±",-1)),C(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),type:"text",placeholder:"è¼¸å…¥å¯¶å¯¶çš„åå­—",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[I,m.value]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"å‡ºç”Ÿæ—¥æœŸ",-1)),C(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[I,p.value]])]),t("div",{class:"flex gap-2"},[t("button",{onClick:P,class:"flex-1 bg-primary-500 text-white py-2 rounded-lg hover:bg-primary-600 transition-colors font-medium"}," å„²å­˜ "),t("button",{onClick:U,class:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300 transition-colors font-medium"}," å–æ¶ˆ ")])])):(a(),r("div",st,[t("div",ot,[e[8]||(e[8]=t("div",{class:"w-16 h-16 bg-gradient-to-br from-primary-400 to-secondary-400 rounded-full flex items-center justify-center text-3xl shadow-lg"}," ğŸ‘¶ ",-1)),t("div",null,[t("p",lt,d(c(l).babyName||"é»æ“Šç·¨è¼¯è¨­å®šå¯¶å¯¶è³‡æ–™"),1),t("p",rt,d(c(l).getAgeDisplay),1)])]),t("div",at,[t("div",nt,[t("p",it,d(c(l).triedIngredientsCount),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500"},"å·²å˜—è©¦",-1))]),t("div",dt,[t("p",ut,d(c(l).allergyIngredientsCount),1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-500"},"éæ•é£Ÿæ",-1))]),t("div",ct,[t("p",gt,d(c(h).ingredients.length),1),e[11]||(e[11]=t("p",{class:"text-xs text-gray-500"},"ç¸½é£Ÿææ•¸",-1))])])]))]),t("div",ft,[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[t("span",null,"ğŸ—ºï¸"),t("span",null,"é£Ÿææ¢ç´¢ç‰†")],-1)),t("div",mt,[(a(),r(S,null,B(N,s=>t("button",{key:s.value,onClick:u=>y.value=s.value,class:f(["flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all",y.value===s.value?"bg-primary-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},d(s.emoji)+" "+d(s.label),11,pt)),64))]),t("div",yt,[(a(!0),r(S,null,B(w.value,s=>(a(),r("div",{key:s.id,onClick:u=>z(s),class:f(["relative bg-white rounded-xl shadow-md overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-lg hover:-translate-y-0.5 active:scale-95 border",{"border-green-400":n(s.id)&&!i(s.id),"border-red-400":i(s.id),"border-gray-200":!n(s.id)&&!i(s.id)}])},[t("div",vt,[E(s.id)?(a(),r("span",ht," ğŸ§Š ")):g("",!0),$(s)&&!i(s.id)?(a(),r("span",_t," âš ï¸ ")):g("",!0),i(s.id)?(a(),r("span",wt," â— ")):g("",!0),n(s.id)?(a(),r("span",kt," âœ… ")):g("",!0)]),t("div",{class:f(["aspect-square p-2 bg-white",{"grayscale opacity-50":!n(s.id),"":n(s.id)}])},[t("img",{src:A(s.id,s.imageUrl),alt:s.name,class:"w-full h-full object-contain rounded-lg",loading:"lazy",onError:e[3]||(e[3]=u=>u.target.src="https://placehold.co/200x200/e2e8f0/64748b?text=Food")},null,40,jt)],2),t("div",Ct,[t("p",{class:f(["text-sm font-medium truncate",{"text-gray-800":n(s.id),"text-gray-400":!n(s.id)}])},d(s.name),3)]),t("div",{class:f(["h-1 w-full",{"bg-green-500":n(s.id)&&!i(s.id),"bg-red-500":i(s.id),"bg-gray-200":!n(s.id)&&!i(s.id)}])},null,2)],10,bt))),128))]),w.value.length===0?(a(),r("div",It,[...e[14]||(e[14]=[t("p",{class:"text-4xl mb-2"},"ğŸ”",-1),t("p",null,"æ²’æœ‰ç¬¦åˆç¯©é¸æ¢ä»¶çš„é£Ÿæ",-1)])])):g("",!0)])])]))}}),Ut=q(St,[["__scopeId","data-v-c888e13c"]]);export{Ut as default};
