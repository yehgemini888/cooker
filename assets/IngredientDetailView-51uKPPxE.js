import{a as V,e as l,c as n,f as e,h as u,n as c,t as r,m as A,F as L,g as N,b as P,u as z,o as a}from"./vendor-vue-DqfF2gyw.js";import{a as D,u as $,b as q}from"./index-BlGr_mvI.js";import{h as G,g as H}from"./useIngredientImage-BuW95jah.js";import"./vendor-supabase-Dq-Jb853.js";const J={key:0,class:"min-h-screen bg-gray-50"},K={class:"relative"},M={class:"h-64 bg-gradient-to-br from-gray-200 to-gray-300 relative overflow-hidden"},O=["src","alt"],Q={class:"absolute bottom-0 left-0 right-0 p-4 text-white"},W={class:"flex items-center gap-2 mb-2"},X={key:0,class:"px-3 py-1 rounded-full text-xs font-medium bg-red-500 text-white"},Y={class:"text-3xl font-bold"},Z={class:"flex items-center gap-4 mt-2 text-sm opacity-90"},ee={key:0},te={class:"bg-white border-b"},se={class:"container mx-auto px-4 py-3"},oe={class:"grid grid-cols-3 gap-2"},re={class:"container mx-auto px-4 py-6 space-y-4"},le={key:0,class:"bg-green-50 rounded-2xl p-5 border border-green-100"},ne={class:"text-green-700 leading-relaxed"},ae={key:1,class:"bg-blue-50 rounded-2xl p-5 border border-blue-100"},ie={class:"text-blue-700 leading-relaxed"},de={key:2,class:"bg-amber-50 rounded-2xl p-5 border border-amber-100"},ue={class:"text-amber-700 leading-relaxed"},ge={key:3,class:"bg-purple-50 rounded-2xl p-5 border border-purple-100"},ce={class:"text-purple-700 leading-relaxed"},pe={key:4,class:"pt-4"},me={class:"font-semibold text-gray-800 mb-4 flex items-center gap-2"},xe={class:"overflow-x-auto -mx-4 px-4"},be={class:"flex gap-3",style:{"min-width":"min-content"}},ve=["onClick"],he={class:"p-3"},fe={class:"font-medium text-gray-800 text-sm truncate"},ye={class:"flex items-center gap-1 mt-2"},_e={key:5,class:"pt-4"},ke={key:1,class:"min-h-screen bg-gray-50 flex items-center justify-center"},Fe=V({__name:"IngredientDetailView",setup(we){const w=z(),v=P(),h=D(),p=$(),f=q(),i=n(()=>w.params.id),o=n(()=>h.getIngredientById(i.value)),g=n(()=>p.getIngredientState(i.value)),C=n(()=>g.value.status==="tried"?1:0),m=n(()=>g.value.status==="tried"),x=n(()=>g.value.allergy),y=n(()=>f.hasItem(i.value)),_=n(()=>{const s={love:"ğŸ˜",neutral:"ğŸ˜",dislike:"ğŸ¤¢"};return g.value.preference?s[g.value.preference]:""}),I=n(()=>{var s;return G(i.value)?H(i.value):((s=o.value)==null?void 0:s.imageUrl)||"https://placehold.co/800x400/e2e8f0/64748b?text=Food"}),b=n(()=>h.recipes.filter(s=>s.ingredient_ids.includes(i.value))),S=n(()=>{var t;return{grain:"ç©€ç‰©é¡",vegetable:"è”¬èœé¡",fruit:"æ°´æœé¡",protein:"è›‹ç™½è³ªé¡",dairy:"ä¹³è£½å“é¡",other:"å…¶ä»–"}[((t=o.value)==null?void 0:t.category)||""]||"å…¶ä»–"}),j=n(()=>{var t;return{grain:"bg-amber-500",vegetable:"bg-green-500",fruit:"bg-pink-500",protein:"bg-blue-500",dairy:"bg-purple-500",other:"bg-gray-500"}[((t=o.value)==null?void 0:t.category)||""]||"bg-gray-500"});function B(s){return s<=6?"bg-blue-100 text-blue-800":s<=9?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"}function F(){p.updateIngredientState(i.value,{status:m.value?"not_tried":"tried"})}function T(){p.updateIngredientState(i.value,{allergy:!x.value})}function E(){f.toggleItem(i.value)}function k(){v.back()}function R(s){v.push(`/recipes?highlight=${s}`)}function U(s){const t=s.target;t.src="https://placehold.co/800x400/e2e8f0/64748b?text=Food"}return(s,t)=>o.value?(a(),l("div",J,[e("div",K,[e("button",{onClick:k,class:"absolute top-4 left-4 z-10 w-10 h-10 bg-white/80 backdrop-blur rounded-full flex items-center justify-center shadow-md"}," â† "),e("div",M,[e("img",{src:I.value,alt:o.value.name,class:"w-full h-full object-cover",onError:U},null,40,O),t[0]||(t[0]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"},null,-1)),e("div",Q,[e("div",W,[e("span",{class:c(["px-3 py-1 rounded-full text-xs font-medium text-white",j.value])},r(S.value),3),o.value.allergy_risk?(a(),l("span",X," âš ï¸ é«˜éæ•é¢¨éšª ")):u("",!0)]),e("h1",Y,r(o.value.name),1),e("div",Z,[e("span",null,"è©¦åƒ: "+r(C.value)+" æ¬¡",1),_.value?(a(),l("span",ee,"å–œå¥½: "+r(_.value),1)):u("",!0)])])])]),e("div",te,[e("div",se,[e("div",oe,[e("button",{onClick:F,class:c(["py-2 rounded-lg text-sm font-medium transition-all",m.value?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},r(m.value?"âœ“ å·²å˜—è©¦":"æ¨™è¨˜å˜—è©¦"),3),e("button",{onClick:T,class:c(["py-2 rounded-lg text-sm font-medium transition-all",x.value?"bg-red-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},r(x.value?"âš  éæ•":"æ¨™è¨˜éæ•"),3),e("button",{onClick:E,class:c(["py-2 rounded-lg text-sm font-medium transition-all",y.value?"bg-cyan-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},r(y.value?"ğŸ§Š å†°ç®±æœ‰":"åŠ å…¥å†°ç®±"),3)])])]),e("div",re,[o.value.nutrition_highlight?(a(),l("div",le,[t[1]||(t[1]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"text-2xl"},"ğŸ¥—"),e("h2",{class:"font-semibold text-green-800"},"ç‡Ÿé¤Šåƒ¹å€¼")],-1)),e("p",ne,r(o.value.nutrition_highlight),1)])):u("",!0),o.value.doctor_note?(a(),l("div",ae,[t[2]||(t[2]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"text-2xl"},"ğŸ‘¨â€âš•ï¸"),e("h2",{class:"font-semibold text-blue-800"},"é†«å¸«ç­†è¨˜")],-1)),e("p",ie,r(o.value.doctor_note),1)])):u("",!0),o.value.picking_guide?(a(),l("div",de,[t[3]||(t[3]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"text-2xl"},"ğŸ›’"),e("h2",{class:"font-semibold text-amber-800"},"æŒ‘é¸æŒ‡å—")],-1)),e("p",ue,r(o.value.picking_guide),1)])):u("",!0),o.value.processing_guide?(a(),l("div",ge,[t[4]||(t[4]=e("div",{class:"flex items-center gap-2 mb-3"},[e("span",{class:"text-2xl"},"ğŸ³"),e("h2",{class:"font-semibold text-purple-800"},"èª¿ç†æ”»ç•¥")],-1)),e("p",ce,r(o.value.processing_guide),1)])):u("",!0),b.value.length>0?(a(),l("div",pe,[e("h2",me,[t[5]||(t[5]=e("span",{class:"text-xl"},"ğŸ“–",-1)),A(" ç›¸é—œé£Ÿè­œ ("+r(b.value.length)+") ",1)]),e("div",xe,[e("div",be,[(a(!0),l(L,null,N(b.value,d=>(a(),l("div",{key:d.id,onClick:Ce=>R(d.id),class:"flex-shrink-0 w-48 bg-white rounded-xl shadow-md overflow-hidden cursor-pointer hover:shadow-lg transition-all duration-200 hover:-translate-y-1"},[t[6]||(t[6]=e("div",{class:"h-24 bg-gradient-to-br from-primary-100 to-secondary-100 flex items-center justify-center"},[e("span",{class:"text-4xl"},"ğŸ²")],-1)),e("div",he,[e("h3",fe,r(d.title),1),e("div",ye,[e("span",{class:c(["text-xs px-2 py-0.5 rounded-full",B(d.min_month)])},r(d.min_month)+"-"+r(d.max_month)+"M ",3)])])],8,ve))),128))])])])):(a(),l("div",_e,[...t[7]||(t[7]=[e("div",{class:"bg-gray-100 rounded-2xl p-6 text-center text-gray-500"},[e("p",{class:"text-3xl mb-2"},"ğŸ“–"),e("p",null,"å°šç„¡åŒ…å«æ­¤é£Ÿæçš„é£Ÿè­œ")],-1)])]))]),t[8]||(t[8]=e("div",{class:"h-8"},null,-1))])):(a(),l("div",ke,[e("div",{class:"text-center"},[t[9]||(t[9]=e("p",{class:"text-5xl mb-4"},"ğŸ¤”",-1)),t[10]||(t[10]=e("p",{class:"text-gray-500 mb-4"},"æ‰¾ä¸åˆ°æ­¤é£Ÿæ",-1)),e("button",{onClick:k,class:"px-6 py-2 bg-primary-500 text-white rounded-lg font-medium"}," è¿”å› ")])]))}});export{Fe as default};
